{"ast":null,"code":"import _regeneratorRuntime from\"/Users/agwenchez/Desktop/Afya Kwanza/Super Admin Dashboard/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _toConsumableArray from\"/Users/agwenchez/Desktop/Afya Kwanza/Super Admin Dashboard/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _asyncToGenerator from\"/Users/agwenchez/Desktop/Afya Kwanza/Super Admin Dashboard/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/agwenchez/Desktop/Afya Kwanza/Super Admin Dashboard/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{Fragment,useState,useEffect,forwardRef}from'react';import{Container}from'reactstrap';import{Grid,Button,IconButton}from'@material-ui/core/';import MaterialTable from\"material-table\";import{AddBox,ArrowDownward,Check,ChevronLeft,ChevronRight,Clear,DeleteOutline,Edit,FilterList,FirstPage,LastPage,Remove,ViewColumn,SaveAlt,Search}from\"@material-ui/icons\";import axios from'axios';import{useHistory,withRouter,Link}from\"react-router-dom\";// import Alert from '@material-ui/lab/Alert';\nimport{toast}from'react-toastify';import Modal from'./modal';import Layout from\"../AppWrapper\";import EditIcon from'@material-ui/icons/Edit';import DeleteIcon from'@material-ui/icons/Delete';import Avatar from'react-avatar';import ConfirmDelete from'./ConfirmDelete';import CustomizedProgressBars from'./CircularProgress';var tableIcons={Add:forwardRef(function(props,ref){return/*#__PURE__*/React.createElement(Button,Object.assign({},props,{ref:ref,variant:\"contained\",color:\"primary\"}),\"Add New\");}),// Add: () => <Button variant=\"contained\" color=\"primary\" >Add New</Button> ,\nCheck:forwardRef(function(props,ref){return/*#__PURE__*/React.createElement(Check,Object.assign({},props,{ref:ref}));}),Clear:forwardRef(function(props,ref){return/*#__PURE__*/React.createElement(Clear,Object.assign({},props,{ref:ref}));}),Delete:forwardRef(function(props,ref){return/*#__PURE__*/React.createElement(DeleteOutline,Object.assign({},props,{ref:ref}));}),DetailPanel:forwardRef(function(props,ref){return/*#__PURE__*/React.createElement(ChevronRight,Object.assign({},props,{ref:ref}));}),Edit:forwardRef(function(props,ref){return/*#__PURE__*/React.createElement(Edit,Object.assign({},props,{ref:ref}));}),Export:forwardRef(function(props,ref){return/*#__PURE__*/React.createElement(SaveAlt,Object.assign({},props,{ref:ref}));}),Filter:forwardRef(function(props,ref){return/*#__PURE__*/React.createElement(FilterList,Object.assign({},props,{ref:ref}));}),FirstPage:forwardRef(function(props,ref){return/*#__PURE__*/React.createElement(FirstPage,Object.assign({},props,{ref:ref}));}),LastPage:forwardRef(function(props,ref){return/*#__PURE__*/React.createElement(LastPage,Object.assign({},props,{ref:ref}));}),NextPage:forwardRef(function(props,ref){return/*#__PURE__*/React.createElement(ChevronRight,Object.assign({},props,{ref:ref}));}),PreviousPage:forwardRef(function(props,ref){return/*#__PURE__*/React.createElement(ChevronLeft,Object.assign({},props,{ref:ref}));}),ResetSearch:forwardRef(function(props,ref){return/*#__PURE__*/React.createElement(Clear,Object.assign({},props,{ref:ref}));}),Search:forwardRef(function(props,ref){return/*#__PURE__*/React.createElement(Search,Object.assign({},props,{ref:ref}));}),SortArrow:forwardRef(function(props,ref){return/*#__PURE__*/React.createElement(ArrowDownward,Object.assign({},props,{ref:ref}));}),ThirdStateCheck:forwardRef(function(props,ref){return/*#__PURE__*/React.createElement(Remove,Object.assign({},props,{ref:ref}));}),ViewColumn:forwardRef(function(props,ref){return/*#__PURE__*/React.createElement(ViewColumn,Object.assign({},props,{ref:ref}));})};var api=axios.create({baseURL:\"https://afya-kwanza-backend.herokuapp.com\"});function validateEmail(email){var re=/^((?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|\"(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21\\x23-\\x5b\\x5d-\\x7f]|\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])*\")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21-\\x5a\\x53-\\x7f]|\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])+)\\]))$/;return re.test(String(email).toLowerCase());}var SaccoTable=function SaccoTable(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),data=_useState2[0],setData=_useState2[1];//table data\nvar _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),riders=_useState4[0],setRiders=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),loading=_useState6[0],setLoading=_useState6[1];var history=useHistory();var columns=[// { title: \"Avatar\", render: rowData => <Avatar maxInitials={1} size={40} round={true} name={rowData === undefined ? \" \" : rowData.sacco_name} /> },\n{title:\"Sacco Name\",field:\"sacco_name\"},{title:\"Admin FirstName\",field:\"admin_firstname\"},{title:\"Admin LastName\",field:\"admin_lastname\"},{title:\"Admin email\",field:\"admin_email\",headerStyle:{paddingRight:\"1%\"}},{title:\"Phone No\",field:\"admin_phonenumber\"},{title:\"Sacco Email\",field:\"sacco_email\"},{cellStyle:{paddingLeft:\"6%\"},headerStyle:{paddingLeft:\"6%\"},render:function render(rowData){return/*#__PURE__*/React.createElement(Link,{to:{pathname:\"/dashboard/saccos/edit\",state:{sacco_name:rowData.sacco_name,id:rowData.sacco_id}}},/*#__PURE__*/React.createElement(EditIcon,{style:{color:'black'}}));}},{cellStyle:{paddingRight:\"5%\"},headerStyle:{paddingRight:\"5%\"},render:function render(rowData){return/*#__PURE__*/React.createElement(ConfirmDelete,{onDelete:function onDelete(){return handleDelete(rowData.sacco_id);},name:rowData.sacco_name,openDialog:openDialog});}}];var openDialog=false;var handleDelete=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(id){var res,dataDelete,afterDelete;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return api.delete(\"/saccos/delete/\".concat(id));case 3:res=_context.sent;dataDelete=_toConsumableArray(riders);afterDelete=dataDelete.filter(function(sacco){return sacco.sacco_id!==id;});setRiders(_toConsumableArray(afterDelete));res.status==200&&toast.success(res.data);_context.next=14;break;case 10:_context.prev=10;_context.t0=_context[\"catch\"](0);console.log(\"error occured=>\",_context.t0.message);_context.t0.message=='Request failed with status code 500'&&toast.error('You cant delete a sacco that has members');case 14:case\"end\":return _context.stop();}}},_callee,null,[[0,10]]);}));return function handleDelete(_x){return _ref.apply(this,arguments);};}();useEffect(function(){setLoading(true);api.get('/saccos/all').then(function(res){// console.log(\"data =>\", res.data)\nsetRiders(res.data);setLoading(false);}).catch(function(error){console.log(\"Error\",error);});},[]);// const redirectToReport = (rowData) => {\n//   // const { history } = props;\n//   history.push({\n//     pathname: \"/dashboard/saccos/profile\", // re-route to this path\n//     state: { sacco_name: rowData.sacco_email, surname: rowData.admin_email } // your row data\n//   });\n// };\nreturn/*#__PURE__*/React.createElement(Layout,null,/*#__PURE__*/React.createElement(Fragment,null,/*#__PURE__*/React.createElement(Container,{fluid:true},/*#__PURE__*/React.createElement(\"div\",{style:{width:'100%'}},/*#__PURE__*/React.createElement(\"h3\",{style:{paddingTop:'5%',marginBottom:'2.5%',textAlign:'center'}},\"Saccos Table\"),/*#__PURE__*/React.createElement(Grid,{container:true,spacing:10},/*#__PURE__*/React.createElement(Grid,{item:true,xs:\"2\"}),/*#__PURE__*/React.createElement(Grid,{item:true,xs:\"2\"}),/*#__PURE__*/React.createElement(Grid,{item:true,xs:\"2\"}),/*#__PURE__*/React.createElement(Grid,{item:true,xs:\"2\"}),/*#__PURE__*/React.createElement(Grid,{item:true,xs:\"2\"}),/*#__PURE__*/React.createElement(Grid,{item:true,xs:\"2\"},/*#__PURE__*/React.createElement(Button,{onClick:function onClick(){history.push('/dashboard/saccos/new');},variant:\"contained\",color:\"primary\"},\"Add New\"))),/*#__PURE__*/React.createElement(Grid,{container:true,spacing:1,style:{marginBottom:'6%'}},/*#__PURE__*/React.createElement(Grid,{item:true,xs:12}),/*#__PURE__*/React.createElement(Grid,{item:true,xs:12},loading?/*#__PURE__*/React.createElement(CustomizedProgressBars,null):/*#__PURE__*/React.createElement(MaterialTable,{title:\"Saccos\",style:{zIndex:'0'},columns:columns,data:riders,icons:tableIcons,options:{exportButton:true,selection:true,// filtering: true,\nsorting:true,actionsColumnIndex:-1,search:true,paginationType:'normal',pageSize:10,pageSizeOptions:[25,50,100,200,300,400,500,600,700]},actions:[{tooltip:'Remove All Selected Users',icon:DeleteOutline,onClick:function onClick(evt,data){return alert('You want to delete '+data.length+' rows');}}]})))))));};export default withRouter(SaccoTable);","map":{"version":3,"sources":["/Users/agwenchez/Desktop/Afya Kwanza/Super Admin Dashboard/client/src/components/new/SaccoTable.jsx"],"names":["React","Fragment","useState","useEffect","forwardRef","Container","Grid","Button","IconButton","MaterialTable","AddBox","ArrowDownward","Check","ChevronLeft","ChevronRight","Clear","DeleteOutline","Edit","FilterList","FirstPage","LastPage","Remove","ViewColumn","SaveAlt","Search","axios","useHistory","withRouter","Link","toast","Modal","Layout","EditIcon","DeleteIcon","Avatar","ConfirmDelete","CustomizedProgressBars","tableIcons","Add","props","ref","Delete","DetailPanel","Export","Filter","NextPage","PreviousPage","ResetSearch","SortArrow","ThirdStateCheck","api","create","baseURL","validateEmail","email","re","test","String","toLowerCase","SaccoTable","data","setData","riders","setRiders","loading","setLoading","history","columns","title","field","headerStyle","paddingRight","cellStyle","paddingLeft","render","rowData","pathname","state","sacco_name","id","sacco_id","color","handleDelete","openDialog","delete","res","dataDelete","afterDelete","filter","sacco","status","success","console","log","message","error","get","then","catch","width","paddingTop","marginBottom","textAlign","push","zIndex","exportButton","selection","sorting","actionsColumnIndex","search","paginationType","pageSize","pageSizeOptions","tooltip","icon","onClick","evt","alert","length"],"mappings":"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","sourcesContent":["import React, { Fragment, useState, useEffect, forwardRef } from 'react';\nimport { Container } from 'reactstrap'\nimport { Grid, Button, IconButton } from '@material-ui/core/'\nimport MaterialTable from \"material-table\";\nimport { AddBox, ArrowDownward, Check, ChevronLeft, ChevronRight, Clear, DeleteOutline, Edit, FilterList, FirstPage, LastPage, Remove, ViewColumn, SaveAlt, Search } from \"@material-ui/icons\";\nimport axios from 'axios';\nimport { useHistory, withRouter, Link } from \"react-router-dom\";\n// import Alert from '@material-ui/lab/Alert';\nimport { toast } from 'react-toastify';\nimport Modal from './modal';\nimport Layout from \"../AppWrapper\"\nimport EditIcon from '@material-ui/icons/Edit';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport Avatar from 'react-avatar';\nimport ConfirmDelete from './ConfirmDelete';\nimport CustomizedProgressBars from './CircularProgress';\n\n\nconst tableIcons = {\n  Add: forwardRef((props, ref) => <Button {...props} ref={ref} variant=\"contained\" color=\"primary\" >Add New</Button>),\n  // Add: () => <Button variant=\"contained\" color=\"primary\" >Add New</Button> ,\n  Check: forwardRef((props, ref) => <Check {...props} ref={ref} />),\n  Clear: forwardRef((props, ref) => <Clear {...props} ref={ref} />),\n  Delete: forwardRef((props, ref) => <DeleteOutline {...props} ref={ref} />),\n  DetailPanel: forwardRef((props, ref) => <ChevronRight {...props} ref={ref} />),\n  Edit: forwardRef((props, ref) => <Edit {...props} ref={ref} />),\n  Export: forwardRef((props, ref) => <SaveAlt {...props} ref={ref} />),\n  Filter: forwardRef((props, ref) => <FilterList {...props} ref={ref} />),\n  FirstPage: forwardRef((props, ref) => <FirstPage {...props} ref={ref} />),\n  LastPage: forwardRef((props, ref) => <LastPage {...props} ref={ref} />),\n  NextPage: forwardRef((props, ref) => <ChevronRight {...props} ref={ref} />),\n  PreviousPage: forwardRef((props, ref) => <ChevronLeft {...props} ref={ref} />),\n  ResetSearch: forwardRef((props, ref) => <Clear {...props} ref={ref} />),\n  Search: forwardRef((props, ref) => <Search {...props} ref={ref} />),\n  SortArrow: forwardRef((props, ref) => <ArrowDownward {...props} ref={ref} />),\n  ThirdStateCheck: forwardRef((props, ref) => <Remove {...props} ref={ref} />),\n  ViewColumn: forwardRef((props, ref) => <ViewColumn {...props} ref={ref} />)\n};\n\n\n\nconst api = axios.create({\n  baseURL: `https://afya-kwanza-backend.herokuapp.com`\n})\n\nfunction validateEmail(email) {\n  const re = /^((?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|\"(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21\\x23-\\x5b\\x5d-\\x7f]|\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])*\")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21-\\x5a\\x53-\\x7f]|\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])+)\\]))$/;\n  return re.test(String(email).toLowerCase());\n}\n\nconst SaccoTable = () => {\n  const [data, setData] = useState([]); //table data\n  const [riders, setRiders] = useState([])\n  const [loading, setLoading] = useState(false)\n\n  const history = useHistory();\n\n  var columns = [\n    // { title: \"Avatar\", render: rowData => <Avatar maxInitials={1} size={40} round={true} name={rowData === undefined ? \" \" : rowData.sacco_name} /> },\n    { title: \"Sacco Name\", field: \"sacco_name\" },\n    { title: \"Admin FirstName\", field: \"admin_firstname\" },\n    { title: \"Admin LastName\", field: \"admin_lastname\" },\n    {\n      title: \"Admin email\",\n      field: \"admin_email\",\n      headerStyle: {\n        paddingRight: \"1%\"\n      }\n    },\n    { title: \"Phone No\", field: \"admin_phonenumber\" },\n    { title: \"Sacco Email\", field: \"sacco_email\" },\n    {\n      cellStyle: {\n        paddingLeft: \"6%\"\n      },\n      headerStyle: {\n        paddingLeft: \"6%\"\n      },\n      render: rowData => (\n        <Link\n          to={{\n            pathname: \"/dashboard/saccos/edit\",\n            state: {\n              sacco_name: rowData.sacco_name, id: rowData.sacco_id\n            }\n          }}\n        >\n          {/* <IconButton aria-label=\"delete\"> */}\n          <EditIcon style={{ color: 'black' }} />\n          {/* </IconButton> */}\n        </Link>\n      )\n    },\n    {\n      cellStyle: {\n        paddingRight: \"5%\"\n      },\n      headerStyle: {\n        paddingRight: \"5%\"\n      },\n      render: rowData => (<ConfirmDelete onDelete={() => handleDelete(rowData.sacco_id)} name={rowData.sacco_name} openDialog={openDialog} />)\n    },\n\n  ]\n\n  let openDialog = false\n\n  const handleDelete = async (id) => {\n    try {\n      const res = await api.delete(`/saccos/delete/${id}`)\n\n      const dataDelete = [...riders];\n      const afterDelete = dataDelete.filter(sacco => sacco.sacco_id !== id);\n\n      setRiders([...afterDelete]);\n      res.status == 200 && toast.success(res.data)\n\n    } catch (error) {\n      console.log(\"error occured=>\", error.message)\n      error.message == 'Request failed with status code 500' && toast.error('You cant delete a sacco that has members')\n    }\n\n  }\n\n\n  useEffect(() => {\n    setLoading(true)\n    api.get('/saccos/all')\n      .then(res => {\n        // console.log(\"data =>\", res.data)\n        setRiders(res.data)\n        setLoading(false)\n      }\n      ).catch(error => {\n        console.log(\"Error\", error)\n      })\n  }, [])\n\n  // const redirectToReport = (rowData) => {\n  //   // const { history } = props;\n  //   history.push({\n  //     pathname: \"/dashboard/saccos/profile\", // re-route to this path\n  //     state: { sacco_name: rowData.sacco_email, surname: rowData.admin_email } // your row data\n  //   });\n  // };\n\n  return (\n    <Layout>\n      <Fragment>\n        <Container fluid={true}>\n          <div style={{ width: '100%' }}>\n\n            <h3 style={{ paddingTop: '5%', marginBottom: '2.5%', textAlign: 'center' }}>Saccos Table</h3>\n            <Grid container spacing={10}>\n              <Grid item xs=\"2\"></Grid>\n              <Grid item xs=\"2\"></Grid>\n              <Grid item xs=\"2\"></Grid>\n              <Grid item xs=\"2\"></Grid>\n              <Grid item xs=\"2\"></Grid>\n              <Grid item xs=\"2\">\n                <Button onClick={() => { history.push('/dashboard/saccos/new') }} variant=\"contained\" color=\"primary\" >\n                  Add New\n                </Button>\n              </Grid>\n            </Grid>\n\n            {/* <Modal /> */}\n            <Grid container spacing={1} style={{ marginBottom: '6%' }}>\n              <Grid item xs={12}></Grid>\n              <Grid item xs={12}>\n\n                {loading ? (<CustomizedProgressBars />) :\n                  (<MaterialTable\n                    title=\"Saccos\"\n                    style={{ zIndex: '0' }}\n                    columns={columns}\n                    data={riders}\n                    icons={tableIcons}\n                    options={{\n                      exportButton: true,\n                      selection: true,\n                      // filtering: true,\n                      sorting: true,\n                      actionsColumnIndex: -1,\n                      search: true,\n                      paginationType: 'normal',\n                      pageSize: 10,\n                      pageSizeOptions: [25, 50, 100, 200, 300, 400, 500, 600, 700]\n                    }}\n                    actions={[\n                      {\n                        tooltip: 'Remove All Selected Users',\n                        icon: DeleteOutline,\n                        onClick: (evt, data) => alert('You want to delete ' + data.length + ' rows')\n                      }\n                    ]}\n\n                  />)}\n              </Grid>\n\n            </Grid>\n          </div>\n        </Container>\n      </Fragment>\n    </Layout>\n  );\n}\n\nexport default withRouter(SaccoTable);"]},"metadata":{},"sourceType":"module"}