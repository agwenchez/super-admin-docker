{"ast":null,"code":"var _jsxFileName = \"/Users/agwenchez/Desktop/Afya Kwanza/Super Admin Dashboard/client/src/components/new/SaccoTable.jsx\";\nimport React, { Fragment, useState, useEffect, forwardRef } from 'react';\nimport { Container } from 'reactstrap';\nimport { Grid, Button, IconButton } from '@material-ui/core/';\nimport MaterialTable from \"material-table\";\nimport { AddBox, ArrowDownward, Check, ChevronLeft, ChevronRight, Clear, DeleteOutline, Edit, FilterList, FirstPage, LastPage, Remove, ViewColumn, SaveAlt, Search } from \"@material-ui/icons\";\nimport axios from 'axios';\nimport { useHistory, withRouter, Link } from \"react-router-dom\"; // import Alert from '@material-ui/lab/Alert';\n\nimport { toast } from 'react-toastify';\nimport Modal from './modal';\nimport Layout from \"../AppWrapper\";\nimport EditIcon from '@material-ui/icons/Edit';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport Avatar from 'react-avatar';\nimport ConfirmDelete from './ConfirmDelete';\nimport CustomizedProgressBars from './CircularProgress';\nconst tableIcons = {\n  Add: forwardRef((props, ref) => /*#__PURE__*/React.createElement(Button, Object.assign({}, props, {\n    ref: ref,\n    variant: \"contained\",\n    color: \"primary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 20,\n      columnNumber: 35\n    }\n  }), \"Add New\")),\n  // Add: () => <Button variant=\"contained\" color=\"primary\" >Add New</Button> ,\n  Check: forwardRef((props, ref) => /*#__PURE__*/React.createElement(Check, Object.assign({}, props, {\n    ref: ref,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 22,\n      columnNumber: 37\n    }\n  }))),\n  Clear: forwardRef((props, ref) => /*#__PURE__*/React.createElement(Clear, Object.assign({}, props, {\n    ref: ref,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 23,\n      columnNumber: 37\n    }\n  }))),\n  Delete: forwardRef((props, ref) => /*#__PURE__*/React.createElement(DeleteOutline, Object.assign({}, props, {\n    ref: ref,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 24,\n      columnNumber: 38\n    }\n  }))),\n  DetailPanel: forwardRef((props, ref) => /*#__PURE__*/React.createElement(ChevronRight, Object.assign({}, props, {\n    ref: ref,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 25,\n      columnNumber: 43\n    }\n  }))),\n  Edit: forwardRef((props, ref) => /*#__PURE__*/React.createElement(Edit, Object.assign({}, props, {\n    ref: ref,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 26,\n      columnNumber: 36\n    }\n  }))),\n  Export: forwardRef((props, ref) => /*#__PURE__*/React.createElement(SaveAlt, Object.assign({}, props, {\n    ref: ref,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 27,\n      columnNumber: 38\n    }\n  }))),\n  Filter: forwardRef((props, ref) => /*#__PURE__*/React.createElement(FilterList, Object.assign({}, props, {\n    ref: ref,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 28,\n      columnNumber: 38\n    }\n  }))),\n  FirstPage: forwardRef((props, ref) => /*#__PURE__*/React.createElement(FirstPage, Object.assign({}, props, {\n    ref: ref,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 29,\n      columnNumber: 41\n    }\n  }))),\n  LastPage: forwardRef((props, ref) => /*#__PURE__*/React.createElement(LastPage, Object.assign({}, props, {\n    ref: ref,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 30,\n      columnNumber: 40\n    }\n  }))),\n  NextPage: forwardRef((props, ref) => /*#__PURE__*/React.createElement(ChevronRight, Object.assign({}, props, {\n    ref: ref,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 31,\n      columnNumber: 40\n    }\n  }))),\n  PreviousPage: forwardRef((props, ref) => /*#__PURE__*/React.createElement(ChevronLeft, Object.assign({}, props, {\n    ref: ref,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 32,\n      columnNumber: 44\n    }\n  }))),\n  ResetSearch: forwardRef((props, ref) => /*#__PURE__*/React.createElement(Clear, Object.assign({}, props, {\n    ref: ref,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 33,\n      columnNumber: 43\n    }\n  }))),\n  Search: forwardRef((props, ref) => /*#__PURE__*/React.createElement(Search, Object.assign({}, props, {\n    ref: ref,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 34,\n      columnNumber: 38\n    }\n  }))),\n  SortArrow: forwardRef((props, ref) => /*#__PURE__*/React.createElement(ArrowDownward, Object.assign({}, props, {\n    ref: ref,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 35,\n      columnNumber: 41\n    }\n  }))),\n  ThirdStateCheck: forwardRef((props, ref) => /*#__PURE__*/React.createElement(Remove, Object.assign({}, props, {\n    ref: ref,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 47\n    }\n  }))),\n  ViewColumn: forwardRef((props, ref) => /*#__PURE__*/React.createElement(ViewColumn, Object.assign({}, props, {\n    ref: ref,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 42\n    }\n  })))\n};\nconst api = axios.create({\n  baseURL: `https://afya-kwanza-backend.herokuapp.com`\n});\n\nfunction validateEmail(email) {\n  const re = /^((?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|\"(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21\\x23-\\x5b\\x5d-\\x7f]|\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])*\")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21-\\x5a\\x53-\\x7f]|\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])+)\\]))$/;\n  return re.test(String(email).toLowerCase());\n}\n\nconst SaccoTable = () => {\n  const [data, setData] = useState([]); //table data\n\n  const [riders, setRiders] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const history = useHistory();\n  var columns = [// { title: \"Avatar\", render: rowData => <Avatar maxInitials={1} size={40} round={true} name={rowData === undefined ? \" \" : rowData.sacco_name} /> },\n  {\n    title: \"Sacco Name\",\n    field: \"sacco_name\"\n  }, {\n    title: \"Admin FirstName\",\n    field: \"admin_firstname\"\n  }, {\n    title: \"Admin LastName\",\n    field: \"admin_lastname\"\n  }, {\n    title: \"Admin email\",\n    field: \"admin_email\",\n    headerStyle: {\n      paddingRight: \"1%\"\n    }\n  }, {\n    title: \"Phone No\",\n    field: \"admin_phonenumber\"\n  }, {\n    title: \"Sacco Email\",\n    field: \"sacco_email\"\n  }, {\n    cellStyle: {\n      paddingLeft: \"6%\"\n    },\n    headerStyle: {\n      paddingLeft: \"6%\"\n    },\n    render: rowData => /*#__PURE__*/React.createElement(Link, {\n      to: {\n        pathname: \"/dashboard/saccos/edit\",\n        state: {\n          sacco_name: rowData.sacco_name,\n          id: rowData.sacco_id\n        }\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(EditIcon, {\n      style: {\n        color: 'black'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 11\n      }\n    }))\n  }, {\n    cellStyle: {\n      paddingRight: \"5%\"\n    },\n    headerStyle: {\n      paddingRight: \"5%\"\n    },\n    render: rowData => /*#__PURE__*/React.createElement(ConfirmDelete, {\n      onDelete: () => handleDelete(rowData.sacco_id),\n      name: rowData.sacco_name,\n      openDialog: openDialog,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 27\n      }\n    })\n  }];\n  let openDialog = false;\n\n  const handleDelete = async id => {\n    try {\n      const res = await api.delete(`/saccos/delete/${id}`);\n      const dataDelete = [...riders];\n      const afterDelete = dataDelete.filter(sacco => sacco.sacco_id !== id);\n      setRiders([...afterDelete]);\n      res.status == 200 && toast.success(res.data);\n    } catch (error) {\n      console.log(\"error occured=>\", error.message);\n      error.message == 'Request failed with status code 500' && toast.error('You cant delete a sacco that has members');\n    }\n  };\n\n  useEffect(() => {\n    setLoading(true);\n    api.get('/saccos/all').then(res => {\n      // console.log(\"data =>\", res.data)\n      setRiders(res.data);\n      setLoading(false);\n    }).catch(error => {\n      console.log(\"Error\", error);\n    });\n  }, []); // const redirectToReport = (rowData) => {\n  //   // const { history } = props;\n  //   history.push({\n  //     pathname: \"/dashboard/saccos/profile\", // re-route to this path\n  //     state: { sacco_name: rowData.sacco_email, surname: rowData.admin_email } // your row data\n  //   });\n  // };\n\n  return /*#__PURE__*/React.createElement(Layout, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Container, {\n    fluid: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      width: '100%'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    style: {\n      paddingTop: '5%',\n      marginBottom: '2.5%',\n      textAlign: 'center'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 13\n    }\n  }, \"Saccos Table\"), /*#__PURE__*/React.createElement(Grid, {\n    container: true,\n    spacing: 10,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: \"2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: \"2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: \"2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: \"2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: \"2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: \"2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    onClick: () => {\n      history.push('/dashboard/saccos/new');\n    },\n    variant: \"contained\",\n    color: \"primary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 17\n    }\n  }, \"Add New\"))), /*#__PURE__*/React.createElement(Grid, {\n    container: true,\n    spacing: 1,\n    style: {\n      marginBottom: '6%'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 15\n    }\n  }, loading ? /*#__PURE__*/React.createElement(CustomizedProgressBars, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 29\n    }\n  }) : /*#__PURE__*/React.createElement(MaterialTable, {\n    title: \"Saccos\",\n    style: {\n      zIndex: '0'\n    },\n    columns: columns,\n    data: riders,\n    icons: tableIcons,\n    options: {\n      exportButton: true,\n      selection: true,\n      // filtering: true,\n      sorting: true,\n      actionsColumnIndex: -1,\n      search: true,\n      paginationType: 'normal',\n      pageSize: 10,\n      pageSizeOptions: [25, 50, 100, 200, 300, 400, 500, 600, 700]\n    },\n    actions: [{\n      tooltip: 'Remove All Selected Users',\n      icon: DeleteOutline,\n      onClick: (evt, data) => alert('You want to delete ' + data.length + ' rows')\n    }],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 20\n    }\n  })))))));\n};\n\nexport default withRouter(SaccoTable);","map":{"version":3,"sources":["/Users/agwenchez/Desktop/Afya Kwanza/Super Admin Dashboard/client/src/components/new/SaccoTable.jsx"],"names":["React","Fragment","useState","useEffect","forwardRef","Container","Grid","Button","IconButton","MaterialTable","AddBox","ArrowDownward","Check","ChevronLeft","ChevronRight","Clear","DeleteOutline","Edit","FilterList","FirstPage","LastPage","Remove","ViewColumn","SaveAlt","Search","axios","useHistory","withRouter","Link","toast","Modal","Layout","EditIcon","DeleteIcon","Avatar","ConfirmDelete","CustomizedProgressBars","tableIcons","Add","props","ref","Delete","DetailPanel","Export","Filter","NextPage","PreviousPage","ResetSearch","SortArrow","ThirdStateCheck","api","create","baseURL","validateEmail","email","re","test","String","toLowerCase","SaccoTable","data","setData","riders","setRiders","loading","setLoading","history","columns","title","field","headerStyle","paddingRight","cellStyle","paddingLeft","render","rowData","pathname","state","sacco_name","id","sacco_id","color","handleDelete","openDialog","res","delete","dataDelete","afterDelete","filter","sacco","status","success","error","console","log","message","get","then","catch","width","paddingTop","marginBottom","textAlign","push","zIndex","exportButton","selection","sorting","actionsColumnIndex","search","paginationType","pageSize","pageSizeOptions","tooltip","icon","onClick","evt","alert","length"],"mappings":"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","sourcesContent":["import React, { Fragment, useState, useEffect, forwardRef } from 'react';\nimport { Container } from 'reactstrap'\nimport { Grid, Button, IconButton } from '@material-ui/core/'\nimport MaterialTable from \"material-table\";\nimport { AddBox, ArrowDownward, Check, ChevronLeft, ChevronRight, Clear, DeleteOutline, Edit, FilterList, FirstPage, LastPage, Remove, ViewColumn, SaveAlt, Search } from \"@material-ui/icons\";\nimport axios from 'axios';\nimport { useHistory, withRouter, Link } from \"react-router-dom\";\n// import Alert from '@material-ui/lab/Alert';\nimport { toast } from 'react-toastify';\nimport Modal from './modal';\nimport Layout from \"../AppWrapper\"\nimport EditIcon from '@material-ui/icons/Edit';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport Avatar from 'react-avatar';\nimport ConfirmDelete from './ConfirmDelete';\nimport CustomizedProgressBars from './CircularProgress';\n\n\nconst tableIcons = {\n  Add: forwardRef((props, ref) => <Button {...props} ref={ref} variant=\"contained\" color=\"primary\" >Add New</Button>),\n  // Add: () => <Button variant=\"contained\" color=\"primary\" >Add New</Button> ,\n  Check: forwardRef((props, ref) => <Check {...props} ref={ref} />),\n  Clear: forwardRef((props, ref) => <Clear {...props} ref={ref} />),\n  Delete: forwardRef((props, ref) => <DeleteOutline {...props} ref={ref} />),\n  DetailPanel: forwardRef((props, ref) => <ChevronRight {...props} ref={ref} />),\n  Edit: forwardRef((props, ref) => <Edit {...props} ref={ref} />),\n  Export: forwardRef((props, ref) => <SaveAlt {...props} ref={ref} />),\n  Filter: forwardRef((props, ref) => <FilterList {...props} ref={ref} />),\n  FirstPage: forwardRef((props, ref) => <FirstPage {...props} ref={ref} />),\n  LastPage: forwardRef((props, ref) => <LastPage {...props} ref={ref} />),\n  NextPage: forwardRef((props, ref) => <ChevronRight {...props} ref={ref} />),\n  PreviousPage: forwardRef((props, ref) => <ChevronLeft {...props} ref={ref} />),\n  ResetSearch: forwardRef((props, ref) => <Clear {...props} ref={ref} />),\n  Search: forwardRef((props, ref) => <Search {...props} ref={ref} />),\n  SortArrow: forwardRef((props, ref) => <ArrowDownward {...props} ref={ref} />),\n  ThirdStateCheck: forwardRef((props, ref) => <Remove {...props} ref={ref} />),\n  ViewColumn: forwardRef((props, ref) => <ViewColumn {...props} ref={ref} />)\n};\n\n\n\nconst api = axios.create({\n  baseURL: `https://afya-kwanza-backend.herokuapp.com`\n})\n\nfunction validateEmail(email) {\n  const re = /^((?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|\"(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21\\x23-\\x5b\\x5d-\\x7f]|\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])*\")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21-\\x5a\\x53-\\x7f]|\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])+)\\]))$/;\n  return re.test(String(email).toLowerCase());\n}\n\nconst SaccoTable = () => {\n  const [data, setData] = useState([]); //table data\n  const [riders, setRiders] = useState([])\n  const [loading, setLoading] = useState(false)\n\n  const history = useHistory();\n\n  var columns = [\n    // { title: \"Avatar\", render: rowData => <Avatar maxInitials={1} size={40} round={true} name={rowData === undefined ? \" \" : rowData.sacco_name} /> },\n    { title: \"Sacco Name\", field: \"sacco_name\" },\n    { title: \"Admin FirstName\", field: \"admin_firstname\" },\n    { title: \"Admin LastName\", field: \"admin_lastname\" },\n    {\n      title: \"Admin email\",\n      field: \"admin_email\",\n      headerStyle: {\n        paddingRight: \"1%\"\n      }\n    },\n    { title: \"Phone No\", field: \"admin_phonenumber\" },\n    { title: \"Sacco Email\", field: \"sacco_email\" },\n    {\n      cellStyle: {\n        paddingLeft: \"6%\"\n      },\n      headerStyle: {\n        paddingLeft: \"6%\"\n      },\n      render: rowData => (\n        <Link\n          to={{\n            pathname: \"/dashboard/saccos/edit\",\n            state: {\n              sacco_name: rowData.sacco_name, id: rowData.sacco_id\n            }\n          }}\n        >\n          {/* <IconButton aria-label=\"delete\"> */}\n          <EditIcon style={{ color: 'black' }} />\n          {/* </IconButton> */}\n        </Link>\n      )\n    },\n    {\n      cellStyle: {\n        paddingRight: \"5%\"\n      },\n      headerStyle: {\n        paddingRight: \"5%\"\n      },\n      render: rowData => (<ConfirmDelete onDelete={() => handleDelete(rowData.sacco_id)} name={rowData.sacco_name} openDialog={openDialog} />)\n    },\n\n  ]\n\n  let openDialog = false\n\n  const handleDelete = async (id) => {\n    try {\n      const res = await api.delete(`/saccos/delete/${id}`)\n\n      const dataDelete = [...riders];\n      const afterDelete = dataDelete.filter(sacco => sacco.sacco_id !== id);\n\n      setRiders([...afterDelete]);\n      res.status == 200 && toast.success(res.data)\n\n    } catch (error) {\n      console.log(\"error occured=>\", error.message)\n      error.message == 'Request failed with status code 500' && toast.error('You cant delete a sacco that has members')\n    }\n\n  }\n\n\n  useEffect(() => {\n    setLoading(true)\n    api.get('/saccos/all')\n      .then(res => {\n        // console.log(\"data =>\", res.data)\n        setRiders(res.data)\n       setLoading(false)\n      }\n      ).catch(error => {\n        console.log(\"Error\", error)\n      })\n  }, [])\n\n  // const redirectToReport = (rowData) => {\n  //   // const { history } = props;\n  //   history.push({\n  //     pathname: \"/dashboard/saccos/profile\", // re-route to this path\n  //     state: { sacco_name: rowData.sacco_email, surname: rowData.admin_email } // your row data\n  //   });\n  // };\n\n  return (\n    <Layout>\n      <Fragment>\n        <Container fluid={true}>\n          <div style={{ width: '100%' }}>\n\n            <h3 style={{ paddingTop: '5%', marginBottom: '2.5%', textAlign: 'center' }}>Saccos Table</h3>\n            <Grid container spacing={10}>\n              <Grid item xs=\"2\"></Grid>\n              <Grid item xs=\"2\"></Grid>\n              <Grid item xs=\"2\"></Grid>\n              <Grid item xs=\"2\"></Grid>\n              <Grid item xs=\"2\"></Grid>\n              <Grid item xs=\"2\">\n                <Button onClick={() => { history.push('/dashboard/saccos/new') }} variant=\"contained\" color=\"primary\" >\n                  Add New\n                </Button>\n              </Grid>\n            </Grid>\n\n            {/* <Modal /> */}\n            <Grid container spacing={1} style={{ marginBottom: '6%' }}>\n              <Grid item xs={12}></Grid>\n              <Grid item xs={12}>\n\n                {loading ? (<CustomizedProgressBars />) :\n                  (<MaterialTable\n                    title=\"Saccos\"\n                    style={{ zIndex: '0' }}\n                    columns={columns}\n                    data={riders}\n                    icons={tableIcons}\n                    options={{\n                      exportButton: true,\n                      selection: true,\n                      // filtering: true,\n                      sorting: true,\n                      actionsColumnIndex: -1,\n                      search: true,\n                      paginationType: 'normal',\n                      pageSize: 10,\n                      pageSizeOptions: [25, 50, 100, 200, 300, 400, 500, 600, 700]\n                    }}\n                    actions={[\n                      {\n                        tooltip: 'Remove All Selected Users',\n                        icon: DeleteOutline,\n                        onClick: (evt, data) => alert('You want to delete ' + data.length + ' rows')\n                      }\n                    ]}\n\n                  />)}\n              </Grid>\n\n            </Grid>\n          </div>\n        </Container>\n      </Fragment>\n    </Layout>\n  );\n}\n\nexport default withRouter(SaccoTable);"]},"metadata":{},"sourceType":"module"}