{"ast":null,"code":"var _jsxFileName = \"/Users/agwenchez/Desktop/Afya Kwanza/Super Admin Dashboard/client/src/components/new/MembersTable.jsx\";\nimport React, { Fragment, useState, useEffect, forwardRef } from 'react';\nimport { Container } from 'reactstrap';\nimport MaterialTable from \"material-table\";\nimport { AddBox, ArrowDownward, Check, ChevronLeft, ChevronRight, Clear, DeleteOutline, Edit, FilterList, FirstPage, LastPage, Remove, ViewColumn, SaveAlt, Search } from \"@material-ui/icons\";\nimport axios from 'axios';\nimport { useHistory, withRouter, Link } from \"react-router-dom\"; // import Alert from '@material-ui/lab/Alert';\n\nimport { toast } from 'react-toastify';\nimport Layout from \"../AppWrapper\";\nimport EditIcon from '@material-ui/icons/Edit';\nimport ConfirmDelete from './ConfirmDelete';\nimport { Button, Dialog, DialogActions, DialogContent, DialogContentText, DialogTitle, Grid } from '@material-ui/core/';\nimport DeleteIcon from '@material-ui/icons/Delete'; // import { Delete } from 'react-feather';\n\nconst tableIcons = {\n  Add: forwardRef((props, ref) => /*#__PURE__*/React.createElement(Button, Object.assign({}, props, {\n    ref: ref,\n    variant: \"contained\",\n    color: \"primary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 19,\n      columnNumber: 35\n    }\n  }), \"Add New\")),\n  // Add: () => <Button variant=\"contained\" color=\"primary\" >Add New</Button> ,\n  Check: forwardRef((props, ref) => /*#__PURE__*/React.createElement(Check, Object.assign({}, props, {\n    ref: ref,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 21,\n      columnNumber: 37\n    }\n  }))),\n  Clear: forwardRef((props, ref) => /*#__PURE__*/React.createElement(Clear, Object.assign({}, props, {\n    ref: ref,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 22,\n      columnNumber: 37\n    }\n  }))),\n  Delete: forwardRef((props, ref) => /*#__PURE__*/React.createElement(DeleteOutline, Object.assign({}, props, {\n    ref: ref,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 23,\n      columnNumber: 38\n    }\n  }))),\n  DetailPanel: forwardRef((props, ref) => /*#__PURE__*/React.createElement(ChevronRight, Object.assign({}, props, {\n    ref: ref,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 24,\n      columnNumber: 43\n    }\n  }))),\n  Edit: forwardRef((props, ref) => /*#__PURE__*/React.createElement(Edit, Object.assign({}, props, {\n    ref: ref,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 25,\n      columnNumber: 36\n    }\n  }))),\n  Export: forwardRef((props, ref) => /*#__PURE__*/React.createElement(SaveAlt, Object.assign({}, props, {\n    ref: ref,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 26,\n      columnNumber: 38\n    }\n  }))),\n  Filter: forwardRef((props, ref) => /*#__PURE__*/React.createElement(FilterList, Object.assign({}, props, {\n    ref: ref,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 27,\n      columnNumber: 38\n    }\n  }))),\n  FirstPage: forwardRef((props, ref) => /*#__PURE__*/React.createElement(FirstPage, Object.assign({}, props, {\n    ref: ref,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 28,\n      columnNumber: 41\n    }\n  }))),\n  LastPage: forwardRef((props, ref) => /*#__PURE__*/React.createElement(LastPage, Object.assign({}, props, {\n    ref: ref,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 29,\n      columnNumber: 40\n    }\n  }))),\n  NextPage: forwardRef((props, ref) => /*#__PURE__*/React.createElement(ChevronRight, Object.assign({}, props, {\n    ref: ref,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 30,\n      columnNumber: 40\n    }\n  }))),\n  PreviousPage: forwardRef((props, ref) => /*#__PURE__*/React.createElement(ChevronLeft, Object.assign({}, props, {\n    ref: ref,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 31,\n      columnNumber: 44\n    }\n  }))),\n  ResetSearch: forwardRef((props, ref) => /*#__PURE__*/React.createElement(Clear, Object.assign({}, props, {\n    ref: ref,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 32,\n      columnNumber: 43\n    }\n  }))),\n  Search: forwardRef((props, ref) => /*#__PURE__*/React.createElement(Search, Object.assign({}, props, {\n    ref: ref,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 33,\n      columnNumber: 38\n    }\n  }))),\n  SortArrow: forwardRef((props, ref) => /*#__PURE__*/React.createElement(ArrowDownward, Object.assign({}, props, {\n    ref: ref,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 34,\n      columnNumber: 41\n    }\n  }))),\n  ThirdStateCheck: forwardRef((props, ref) => /*#__PURE__*/React.createElement(Remove, Object.assign({}, props, {\n    ref: ref,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 35,\n      columnNumber: 47\n    }\n  }))),\n  ViewColumn: forwardRef((props, ref) => /*#__PURE__*/React.createElement(ViewColumn, Object.assign({}, props, {\n    ref: ref,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 42\n    }\n  })))\n};\nconst api = axios.create({\n  baseURL: `https://afya-kwanza-backend.herokuapp.com`\n});\n\nfunction validateEmail(email) {\n  const re = /^((?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|\"(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21\\x23-\\x5b\\x5d-\\x7f]|\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])*\")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21-\\x5a\\x53-\\x7f]|\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])+)\\]))$/;\n  return re.test(String(email).toLowerCase());\n}\n\nconst MembersTable = () => {\n  const [data, setData] = useState([]); //table data\n\n  const [riders, setRiders] = useState([]); //for error handling\n\n  const [iserror, setIserror] = useState(false);\n  const [errorMessages, setErrorMessages] = useState([]);\n  var columns = [{\n    title: \"id\",\n    field: \"id\",\n    hidden: true\n  }, // { title: \"Avatar\", render: rowData => <Avatar maxInitials={1} size={40} round={true} name={rowData === undefined ? \" \" : rowData.first_name} /> },\n  {\n    title: \"Name\",\n    field: \"name\"\n  }, {\n    title: \"Email\",\n    field: \"email\"\n  }, {\n    title: \"Phone No\",\n    field: \"phonenumber\"\n  }, {\n    title: \"Location\",\n    field: \"location\"\n  }, {\n    title: \"Sacco\",\n    field: \"sacco\"\n  }, {\n    title: \"Insruance Plan\",\n    field: \"insurance_plan\"\n  }, {\n    cellStyle: {\n      paddingLeft: \"8%\"\n    },\n    headerStyle: {\n      paddingLeft: \"8%\"\n    },\n    render: rowData => /*#__PURE__*/React.createElement(Link, {\n      to: {\n        pathname: \"/dashboard/members/edit\",\n        state: {\n          id: rowData.member_id\n        }\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(EditIcon, {\n      style: {\n        color: 'black'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 9\n      }\n    }))\n  }, {\n    cellStyle: {\n      paddingRight: \"5%\"\n    },\n    headerStyle: {\n      paddingRight: \"5%\"\n    },\n    render: rowData => /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(DeleteIcon, {\n      onClick: handleClickOpen,\n      style: {\n        cursor: 'pointer',\n        color: 'red'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 7\n      }\n    }), /*#__PURE__*/React.createElement(Dialog, {\n      open: open,\n      onClose: handleClose,\n      \"aria-labelledby\": \"alert-dialog-title\",\n      \"aria-describedby\": \"alert-dialog-description\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(DialogTitle, {\n      id: \"alert-dialog-title\",\n      style: {\n        marginTop: '5%'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 9\n      }\n    }, \"Delete Sacco Member\"), /*#__PURE__*/React.createElement(DialogContent, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(DialogContentText, {\n      id: \"alert-dialog-description\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 11\n      }\n    }, \"Are you sure you want to delete \", name, \"?\")), /*#__PURE__*/React.createElement(DialogActions, {\n      style: {\n        marginBottom: '5%'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      onClick: onDelete,\n      color: \"primary\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 11\n      }\n    }, \"Yes\"), /*#__PURE__*/React.createElement(Button, {\n      onClick: handleClose,\n      color: \"primary\",\n      autoFocus: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 11\n      }\n    }, \"No\"))))\n  }]; // const res = await api.delete(`/members/delete/${id}`)\n\n  const handleDelete = async id => {\n    try {\n      const res = await api.delete(`/members/delete/${id}`);\n      const dataDelete = [...riders];\n      const afterDelete = dataDelete.filter(rider => rider.member_id !== id);\n      setRiders([...afterDelete]);\n\n      if (res.status == 200) {\n        toast.success(res.data);\n      }\n    } catch (error) {\n      console.log(\"error occured=>\", error);\n      toast.error(error);\n    }\n  };\n\n  useEffect(() => {\n    api.get('/members/all').then(res => {\n      // console.log(\"data =>\", res.data)\n      setRiders(res.data); // console.log(\"riders =>\", riders)\n    }).catch(error => {\n      console.log(\"Error\", error);\n    });\n  }, []);\n\n  const handleRowUpdate = (newData, oldData, resolve) => {\n    //validation\n    // console.log(newData)\n    let errorList = [];\n\n    if (newData.name === undefined) {\n      errorList.push(\"Please enter a name\");\n    }\n\n    if (newData.email === undefined) {\n      errorList.push(\"Please enter an email\");\n    }\n\n    if (newData.phonenumber === undefined) {\n      errorList.push(\"Please enter a phone number\");\n    }\n\n    if (newData.location === undefined) {\n      errorList.push(\"Please enter a location\");\n    }\n\n    if (newData.sacco === undefined) {\n      errorList.push(\"Please enter a sacco name\");\n    }\n\n    if (newData.insurance_plan === undefined) {\n      errorList.push(\"Please enter an insurance plan\");\n    }\n\n    if (errorList.length < 1) {\n      // console.log(newData.member_id)\n      api.put(\"/members/update/\" + newData.member_id, newData).then(res => {\n        // console.log(\"New data=>\",newData)\n        const dataUpdate = [...riders];\n        const index = oldData.tableData.id;\n        dataUpdate[index] = newData;\n        setRiders([...dataUpdate]);\n        console.log(\"Response status ==>\", res.status);\n\n        if (res.status == 201) {\n          toast.success(res.data);\n        }\n\n        resolve();\n        setIserror(false);\n        setErrorMessages([]);\n      }).catch(error => {\n        setErrorMessages([`Update failed: ${error}`]);\n        toast.error(`Update failed: ${error}`);\n        setIserror(true);\n        resolve();\n      });\n    } else {\n      setErrorMessages(errorList);\n      setIserror(true);\n      resolve();\n    }\n  };\n\n  const handleRowDelete = (oldData, resolve) => {\n    api.delete(\"/members/delete/\" + oldData.member_id).then(res => {\n      const dataDelete = [...riders];\n      const index = oldData.tableData.id;\n      dataDelete.splice(index, 1);\n      setRiders([...dataDelete]); // alert(res.data)\n      // console.log(\"API Response\",res)\n\n      if (res.status == 200) {\n        toast.success(res.data);\n      }\n\n      resolve();\n    }).catch(error => {\n      console.log(error);\n      toast.error(`Delete failed:${error}`);\n      setIserror(true);\n      resolve();\n    });\n  };\n\n  const history = useHistory();\n  return /*#__PURE__*/React.createElement(Layout, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 245,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 246,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Container, {\n    fluid: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 247,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      width: '100%'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 248,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    style: {\n      paddingTop: '5%',\n      marginBottom: '2.5%',\n      textAlign: 'center'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 250,\n      columnNumber: 13\n    }\n  }, \"Sacco Members Table\"), /*#__PURE__*/React.createElement(Grid, {\n    container: true,\n    spacing: 10,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 251,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: \"2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 252,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: \"2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 253,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: \"2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 254,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: \"2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 255,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: \"2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 256,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: \"2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 257,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    onClick: () => {\n      history.push('/dashboard/members/new');\n    },\n    variant: \"contained\",\n    color: \"primary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 258,\n      columnNumber: 17\n    }\n  }, \"Add New\"))), /*#__PURE__*/React.createElement(Grid, {\n    container: true,\n    spacing: 1,\n    style: {\n      marginBottom: '6%'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 265,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 266,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 267,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(MaterialTable, {\n    title: \"Sacco Members\",\n    style: {\n      zIndex: '0'\n    },\n    columns: columns,\n    data: riders,\n    icons: tableIcons // editable={{\n    //   onRowUpdate: (oldData) =>\n    //     new Promise((resolve) => {\n    //       history.push('/dashboard/members/new', {email:oldData.email})\n    //     }),\n    //   onRowDelete: (oldData) =>\n    //     new Promise((resolve) => {\n    //       handleRowDelete(oldData, resolve)\n    //     }),\n    // }}\n    ,\n    options: {\n      exportButton: true,\n      selection: true,\n      // filtering: true,\n      actionsColumnIndex: -1,\n      search: true,\n      paginationType: 'normal',\n      pageSize: 10,\n      pageSizeOptions: [25, 50, 100, 200, 300, 400, 500, 600, 700]\n    },\n    actions: [{\n      tooltip: 'Remove All Selected Users',\n      icon: DeleteOutline,\n      onClick: (evt, data) => alert('You want to delete ' + data.length + ' rows')\n    }],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 277,\n      columnNumber: 17\n    }\n  })))))));\n};\n\nexport default MembersTable;","map":{"version":3,"sources":["/Users/agwenchez/Desktop/Afya Kwanza/Super Admin Dashboard/client/src/components/new/MembersTable.jsx"],"names":["React","Fragment","useState","useEffect","forwardRef","Container","MaterialTable","AddBox","ArrowDownward","Check","ChevronLeft","ChevronRight","Clear","DeleteOutline","Edit","FilterList","FirstPage","LastPage","Remove","ViewColumn","SaveAlt","Search","axios","useHistory","withRouter","Link","toast","Layout","EditIcon","ConfirmDelete","Button","Dialog","DialogActions","DialogContent","DialogContentText","DialogTitle","Grid","DeleteIcon","tableIcons","Add","props","ref","Delete","DetailPanel","Export","Filter","NextPage","PreviousPage","ResetSearch","SortArrow","ThirdStateCheck","api","create","baseURL","validateEmail","email","re","test","String","toLowerCase","MembersTable","data","setData","riders","setRiders","iserror","setIserror","errorMessages","setErrorMessages","columns","title","field","hidden","cellStyle","paddingLeft","headerStyle","render","rowData","pathname","state","id","member_id","color","paddingRight","handleClickOpen","cursor","open","handleClose","marginTop","name","marginBottom","onDelete","handleDelete","res","delete","dataDelete","afterDelete","filter","rider","status","success","error","console","log","get","then","catch","handleRowUpdate","newData","oldData","resolve","errorList","undefined","push","phonenumber","location","sacco","insurance_plan","length","put","dataUpdate","index","tableData","handleRowDelete","splice","history","width","paddingTop","textAlign","zIndex","exportButton","selection","actionsColumnIndex","search","paginationType","pageSize","pageSizeOptions","tooltip","icon","onClick","evt","alert"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,QAA1B,EAAoCC,SAApC,EAA+CC,UAA/C,QAAiE,OAAjE;AACA,SAASC,SAAT,QAA0B,YAA1B;AACA,OAAOC,aAAP,MAA0B,gBAA1B;AACA,SAASC,MAAT,EAAiBC,aAAjB,EAAgCC,KAAhC,EAAuCC,WAAvC,EAAoDC,YAApD,EAAkEC,KAAlE,EAAyEC,aAAzE,EAAwFC,IAAxF,EAA8FC,UAA9F,EAA0GC,SAA1G,EAAqHC,QAArH,EAA+HC,MAA/H,EAAuIC,UAAvI,EAAmJC,OAAnJ,EAA4JC,MAA5J,QAA0K,oBAA1K;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,UAAT,EAAqBC,UAArB,EAAiCC,IAAjC,QAA6C,kBAA7C,C,CACA;;AACA,SAASC,KAAT,QAAsB,gBAAtB;AACA,OAAOC,MAAP,MAAmB,eAAnB;AACA,OAAOC,QAAP,MAAqB,yBAArB;AACA,OAAOC,aAAP,MAA0B,iBAA1B;AACA,SAASC,MAAT,EAAiBC,MAAjB,EAAyBC,aAAzB,EAAwCC,aAAxC,EAAuDC,iBAAvD,EAA0EC,WAA1E,EAAuFC,IAAvF,QAAkG,oBAAlG;AACA,OAAOC,UAAP,MAAuB,2BAAvB,C,CAEA;;AAGA,MAAMC,UAAU,GAAG;AACjBC,EAAAA,GAAG,EAAEnC,UAAU,CAAC,CAACoC,KAAD,EAAQC,GAAR,kBAAgB,oBAAC,MAAD,oBAAYD,KAAZ;AAAmB,IAAA,GAAG,EAAEC,GAAxB;AAA6B,IAAA,OAAO,EAAC,WAArC;AAAiD,IAAA,KAAK,EAAC,SAAvD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAAjB,CADE;AAEjB;AACAhC,EAAAA,KAAK,EAAEL,UAAU,CAAC,CAACoC,KAAD,EAAQC,GAAR,kBAAgB,oBAAC,KAAD,oBAAWD,KAAX;AAAkB,IAAA,GAAG,EAAEC,GAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAjB,CAHA;AAIjB7B,EAAAA,KAAK,EAAER,UAAU,CAAC,CAACoC,KAAD,EAAQC,GAAR,kBAAgB,oBAAC,KAAD,oBAAWD,KAAX;AAAkB,IAAA,GAAG,EAAEC,GAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAjB,CAJA;AAKjBC,EAAAA,MAAM,EAAEtC,UAAU,CAAC,CAACoC,KAAD,EAAQC,GAAR,kBAAgB,oBAAC,aAAD,oBAAmBD,KAAnB;AAA0B,IAAA,GAAG,EAAEC,GAA/B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAjB,CALD;AAMjBE,EAAAA,WAAW,EAAEvC,UAAU,CAAC,CAACoC,KAAD,EAAQC,GAAR,kBAAgB,oBAAC,YAAD,oBAAkBD,KAAlB;AAAyB,IAAA,GAAG,EAAEC,GAA9B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAjB,CANN;AAOjB3B,EAAAA,IAAI,EAAEV,UAAU,CAAC,CAACoC,KAAD,EAAQC,GAAR,kBAAgB,oBAAC,IAAD,oBAAUD,KAAV;AAAiB,IAAA,GAAG,EAAEC,GAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAjB,CAPC;AAQjBG,EAAAA,MAAM,EAAExC,UAAU,CAAC,CAACoC,KAAD,EAAQC,GAAR,kBAAgB,oBAAC,OAAD,oBAAaD,KAAb;AAAoB,IAAA,GAAG,EAAEC,GAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAjB,CARD;AASjBI,EAAAA,MAAM,EAAEzC,UAAU,CAAC,CAACoC,KAAD,EAAQC,GAAR,kBAAgB,oBAAC,UAAD,oBAAgBD,KAAhB;AAAuB,IAAA,GAAG,EAAEC,GAA5B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAjB,CATD;AAUjBzB,EAAAA,SAAS,EAAEZ,UAAU,CAAC,CAACoC,KAAD,EAAQC,GAAR,kBAAgB,oBAAC,SAAD,oBAAeD,KAAf;AAAsB,IAAA,GAAG,EAAEC,GAA3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAjB,CAVJ;AAWjBxB,EAAAA,QAAQ,EAAEb,UAAU,CAAC,CAACoC,KAAD,EAAQC,GAAR,kBAAgB,oBAAC,QAAD,oBAAcD,KAAd;AAAqB,IAAA,GAAG,EAAEC,GAA1B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAjB,CAXH;AAYjBK,EAAAA,QAAQ,EAAE1C,UAAU,CAAC,CAACoC,KAAD,EAAQC,GAAR,kBAAgB,oBAAC,YAAD,oBAAkBD,KAAlB;AAAyB,IAAA,GAAG,EAAEC,GAA9B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAjB,CAZH;AAajBM,EAAAA,YAAY,EAAE3C,UAAU,CAAC,CAACoC,KAAD,EAAQC,GAAR,kBAAgB,oBAAC,WAAD,oBAAiBD,KAAjB;AAAwB,IAAA,GAAG,EAAEC,GAA7B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAjB,CAbP;AAcjBO,EAAAA,WAAW,EAAE5C,UAAU,CAAC,CAACoC,KAAD,EAAQC,GAAR,kBAAgB,oBAAC,KAAD,oBAAWD,KAAX;AAAkB,IAAA,GAAG,EAAEC,GAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAjB,CAdN;AAejBpB,EAAAA,MAAM,EAAEjB,UAAU,CAAC,CAACoC,KAAD,EAAQC,GAAR,kBAAgB,oBAAC,MAAD,oBAAYD,KAAZ;AAAmB,IAAA,GAAG,EAAEC,GAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAjB,CAfD;AAgBjBQ,EAAAA,SAAS,EAAE7C,UAAU,CAAC,CAACoC,KAAD,EAAQC,GAAR,kBAAgB,oBAAC,aAAD,oBAAmBD,KAAnB;AAA0B,IAAA,GAAG,EAAEC,GAA/B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAjB,CAhBJ;AAiBjBS,EAAAA,eAAe,EAAE9C,UAAU,CAAC,CAACoC,KAAD,EAAQC,GAAR,kBAAgB,oBAAC,MAAD,oBAAYD,KAAZ;AAAmB,IAAA,GAAG,EAAEC,GAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAjB,CAjBV;AAkBjBtB,EAAAA,UAAU,EAAEf,UAAU,CAAC,CAACoC,KAAD,EAAQC,GAAR,kBAAgB,oBAAC,UAAD,oBAAgBD,KAAhB;AAAuB,IAAA,GAAG,EAAEC,GAA5B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAjB;AAlBL,CAAnB;AAsBA,MAAMU,GAAG,GAAG7B,KAAK,CAAC8B,MAAN,CAAa;AACvBC,EAAAA,OAAO,EAAG;AADa,CAAb,CAAZ;;AAIA,SAASC,aAAT,CAAuBC,KAAvB,EAA8B;AAC5B,QAAMC,EAAE,GAAG,gbAAX;AACA,SAAOA,EAAE,CAACC,IAAH,CAAQC,MAAM,CAACH,KAAD,CAAN,CAAcI,WAAd,EAAR,CAAP;AACD;;AAID,MAAMC,YAAY,GAAG,MAAM;AACzB,QAAM,CAACC,IAAD,EAAOC,OAAP,IAAkB5D,QAAQ,CAAC,EAAD,CAAhC,CADyB,CACa;;AACtC,QAAM,CAAC6D,MAAD,EAASC,SAAT,IAAsB9D,QAAQ,CAAC,EAAD,CAApC,CAFyB,CAIzB;;AACA,QAAM,CAAC+D,OAAD,EAAUC,UAAV,IAAwBhE,QAAQ,CAAC,KAAD,CAAtC;AACA,QAAM,CAACiE,aAAD,EAAgBC,gBAAhB,IAAoClE,QAAQ,CAAC,EAAD,CAAlD;AAGA,MAAImE,OAAO,GAAG,CACZ;AAAEC,IAAAA,KAAK,EAAE,IAAT;AAAeC,IAAAA,KAAK,EAAE,IAAtB;AAA4BC,IAAAA,MAAM,EAAE;AAApC,GADY,EAEZ;AACA;AAAEF,IAAAA,KAAK,EAAE,MAAT;AAAiBC,IAAAA,KAAK,EAAE;AAAxB,GAHY,EAIZ;AAAED,IAAAA,KAAK,EAAE,OAAT;AAAkBC,IAAAA,KAAK,EAAE;AAAzB,GAJY,EAKZ;AAAED,IAAAA,KAAK,EAAE,UAAT;AAAqBC,IAAAA,KAAK,EAAE;AAA5B,GALY,EAMZ;AAAED,IAAAA,KAAK,EAAE,UAAT;AAAqBC,IAAAA,KAAK,EAAE;AAA5B,GANY,EAOZ;AAAED,IAAAA,KAAK,EAAE,OAAT;AAAkBC,IAAAA,KAAK,EAAE;AAAzB,GAPY,EAQZ;AAAED,IAAAA,KAAK,EAAE,gBAAT;AAA2BC,IAAAA,KAAK,EAAE;AAAlC,GARY,EASZ;AAAEE,IAAAA,SAAS,EAAE;AACXC,MAAAA,WAAW,EAAE;AADF,KAAb;AAGAC,IAAAA,WAAW,EAAE;AACXD,MAAAA,WAAW,EAAE;AADF,KAHb;AAMAE,IAAAA,MAAM,EAAEC,OAAO,iBACb,oBAAC,IAAD;AACE,MAAA,EAAE,EAAE;AACFC,QAAAA,QAAQ,EAAE,yBADR;AAEFC,QAAAA,KAAK,EAAE;AACNC,UAAAA,EAAE,EAACH,OAAO,CAACI;AADL;AAFL,OADN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBASE,oBAAC,QAAD;AAAU,MAAA,KAAK,EAAE;AAAEC,QAAAA,KAAK,EAAE;AAAT,OAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MATF;AAPF,GATY,EA8Bd;AAAET,IAAAA,SAAS,EAAE;AACTU,MAAAA,YAAY,EAAE;AADL,KAAb;AAGER,IAAAA,WAAW,EAAE;AACXQ,MAAAA,YAAY,EAAE;AADH,KAHf;AAMEP,IAAAA,MAAM,EAAEC,OAAO,iBACf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAEE,oBAAC,UAAD;AAAa,MAAA,OAAO,EAAEO,eAAtB;AAAuC,MAAA,KAAK,EAAE;AAAEC,QAAAA,MAAM,EAAE,SAAV;AAAqBH,QAAAA,KAAK,EAAE;AAA5B,OAA9C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFF,eAGE,oBAAC,MAAD;AAEE,MAAA,IAAI,EAAEI,IAFR;AAGE,MAAA,OAAO,EAAEC,WAHX;AAIE,yBAAgB,oBAJlB;AAKE,0BAAiB,0BALnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAOE,oBAAC,WAAD;AAAa,MAAA,EAAE,EAAC,oBAAhB;AAAuC,MAAA,KAAK,EAAE;AAACC,QAAAA,SAAS,EAAC;AAAX,OAA9C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAiE,qBAAjE,CAPF,eAQE,oBAAC,aAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE,oBAAC,iBAAD;AAAmB,MAAA,EAAE,EAAC,0BAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2CACuCC,IADvC,MADF,CARF,eAaE,oBAAC,aAAD;AAAe,MAAA,KAAK,EAAE;AAAEC,QAAAA,YAAY,EAAC;AAAf,OAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE,oBAAC,MAAD;AAAQ,MAAA,OAAO,EAAEC,QAAjB;AAA2B,MAAA,KAAK,EAAC,SAAjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aADF,eAIE,oBAAC,MAAD;AAAQ,MAAA,OAAO,EAAEJ,WAAjB;AAA8B,MAAA,KAAK,EAAC,SAApC;AAA8C,MAAA,SAAS,MAAvD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAJF,CAbF,CAHF;AAPF,GA9Bc,CAAd,CATyB,CA4EzB;;AACA,QAAMK,YAAY,GAAG,MAAOZ,EAAP,IAAY;AAC/B,QAAI;AACF,YAAMa,GAAG,GAAG,MAAM1C,GAAG,CAAC2C,MAAJ,CAAY,mBAAkBd,EAAG,EAAjC,CAAlB;AAEA,YAAMe,UAAU,GAAG,CAAC,GAAGhC,MAAJ,CAAnB;AACA,YAAMiC,WAAW,GAAGD,UAAU,CAACE,MAAX,CAAkBC,KAAK,IAAIA,KAAK,CAACjB,SAAN,KAAmBD,EAA9C,CAApB;AACAhB,MAAAA,SAAS,CAAC,CAAC,GAAGgC,WAAJ,CAAD,CAAT;;AACA,UAAIH,GAAG,CAACM,MAAJ,IAAc,GAAlB,EAAuB;AACrBzE,QAAAA,KAAK,CAAC0E,OAAN,CAAcP,GAAG,CAAChC,IAAlB;AACD;AAEF,KAVD,CAUE,OAAOwC,KAAP,EAAc;AACdC,MAAAA,OAAO,CAACC,GAAR,CAAY,iBAAZ,EAA+BF,KAA/B;AACA3E,MAAAA,KAAK,CAAC2E,KAAN,CAAYA,KAAZ;AACD;AAEF,GAhBD;;AAmBAlG,EAAAA,SAAS,CAAC,MAAM;AACdgD,IAAAA,GAAG,CAACqD,GAAJ,CAAQ,cAAR,EACGC,IADH,CACQZ,GAAG,IAAI;AACX;AACA7B,MAAAA,SAAS,CAAC6B,GAAG,CAAChC,IAAL,CAAT,CAFW,CAGX;AACD,KALH,EAMI6C,KANJ,CAMUL,KAAK,IAAI;AACfC,MAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ,EAAqBF,KAArB;AACD,KARH;AAUD,GAXQ,EAWN,EAXM,CAAT;;AAcA,QAAMM,eAAe,GAAG,CAACC,OAAD,EAAUC,OAAV,EAAmBC,OAAnB,KAA+B;AACrD;AACA;AACA,QAAIC,SAAS,GAAG,EAAhB;;AACA,QAAIH,OAAO,CAACnB,IAAR,KAAiBuB,SAArB,EAAgC;AAC9BD,MAAAA,SAAS,CAACE,IAAV,CAAe,qBAAf;AACD;;AACD,QAAIL,OAAO,CAACrD,KAAR,KAAkByD,SAAtB,EAAiC;AAC/BD,MAAAA,SAAS,CAACE,IAAV,CAAe,uBAAf;AACD;;AACD,QAAIL,OAAO,CAACM,WAAR,KAAwBF,SAA5B,EAAuC;AACrCD,MAAAA,SAAS,CAACE,IAAV,CAAe,6BAAf;AACD;;AACD,QAAIL,OAAO,CAACO,QAAR,KAAqBH,SAAzB,EAAoC;AAClCD,MAAAA,SAAS,CAACE,IAAV,CAAe,yBAAf;AACD;;AACD,QAAIL,OAAO,CAACQ,KAAR,KAAkBJ,SAAtB,EAAiC;AAC/BD,MAAAA,SAAS,CAACE,IAAV,CAAe,2BAAf;AACD;;AACD,QAAIL,OAAO,CAACS,cAAR,KAA2BL,SAA/B,EAA0C;AACxCD,MAAAA,SAAS,CAACE,IAAV,CAAe,gCAAf;AACD;;AAGD,QAAIF,SAAS,CAACO,MAAV,GAAmB,CAAvB,EAA0B;AACxB;AACAnE,MAAAA,GAAG,CAACoE,GAAJ,CAAQ,qBAAqBX,OAAO,CAAC3B,SAArC,EAAgD2B,OAAhD,EACGH,IADH,CACQZ,GAAG,IAAI;AACX;AACA,cAAM2B,UAAU,GAAG,CAAC,GAAGzD,MAAJ,CAAnB;AACA,cAAM0D,KAAK,GAAGZ,OAAO,CAACa,SAAR,CAAkB1C,EAAhC;AACAwC,QAAAA,UAAU,CAACC,KAAD,CAAV,GAAoBb,OAApB;AACA5C,QAAAA,SAAS,CAAC,CAAC,GAAGwD,UAAJ,CAAD,CAAT;AACAlB,QAAAA,OAAO,CAACC,GAAR,CAAY,qBAAZ,EAAmCV,GAAG,CAACM,MAAvC;;AACA,YAAIN,GAAG,CAACM,MAAJ,IAAc,GAAlB,EAAuB;AACrBzE,UAAAA,KAAK,CAAC0E,OAAN,CAAcP,GAAG,CAAChC,IAAlB;AACD;;AACDiD,QAAAA,OAAO;AACP5C,QAAAA,UAAU,CAAC,KAAD,CAAV;AACAE,QAAAA,gBAAgB,CAAC,EAAD,CAAhB;AACD,OAdH,EAeGsC,KAfH,CAeSL,KAAK,IAAI;AACdjC,QAAAA,gBAAgB,CAAC,CAAE,kBAAiBiC,KAAM,EAAzB,CAAD,CAAhB;AACA3E,QAAAA,KAAK,CAAC2E,KAAN,CAAa,kBAAiBA,KAAM,EAApC;AACAnC,QAAAA,UAAU,CAAC,IAAD,CAAV;AACA4C,QAAAA,OAAO;AAER,OArBH;AAsBD,KAxBD,MAwBO;AACL1C,MAAAA,gBAAgB,CAAC2C,SAAD,CAAhB;AACA7C,MAAAA,UAAU,CAAC,IAAD,CAAV;AACA4C,MAAAA,OAAO;AAER;AAEF,GAvDD;;AA0DA,QAAMa,eAAe,GAAG,CAACd,OAAD,EAAUC,OAAV,KAAsB;AAC5C3D,IAAAA,GAAG,CAAC2C,MAAJ,CAAW,qBAAqBe,OAAO,CAAC5B,SAAxC,EACGwB,IADH,CACQZ,GAAG,IAAI;AACX,YAAME,UAAU,GAAG,CAAC,GAAGhC,MAAJ,CAAnB;AACA,YAAM0D,KAAK,GAAGZ,OAAO,CAACa,SAAR,CAAkB1C,EAAhC;AACAe,MAAAA,UAAU,CAAC6B,MAAX,CAAkBH,KAAlB,EAAyB,CAAzB;AACAzD,MAAAA,SAAS,CAAC,CAAC,GAAG+B,UAAJ,CAAD,CAAT,CAJW,CAKX;AACA;;AACA,UAAIF,GAAG,CAACM,MAAJ,IAAc,GAAlB,EAAuB;AACrBzE,QAAAA,KAAK,CAAC0E,OAAN,CAAcP,GAAG,CAAChC,IAAlB;AACD;;AACDiD,MAAAA,OAAO;AACR,KAZH,EAaGJ,KAbH,CAaSL,KAAK,IAAI;AACdC,MAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ;AACA3E,MAAAA,KAAK,CAAC2E,KAAN,CAAa,iBAAgBA,KAAM,EAAnC;AACAnC,MAAAA,UAAU,CAAC,IAAD,CAAV;AACA4C,MAAAA,OAAO;AACR,KAlBH;AAmBD,GApBD;;AAsBA,QAAMe,OAAO,GAAGtG,UAAU,EAA1B;AAGA,sBACE,oBAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,QAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,SAAD;AAAW,IAAA,KAAK,EAAE,IAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAK,IAAA,KAAK,EAAE;AAAEuG,MAAAA,KAAK,EAAE;AAAT,KAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAEE;AAAI,IAAA,KAAK,EAAE;AAAEC,MAAAA,UAAU,EAAE,IAAd;AAAoBrC,MAAAA,YAAY,EAAE,MAAlC;AAA0CsC,MAAAA,SAAS,EAAE;AAArD,KAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2BAFF,eAGE,oBAAC,IAAD;AAAM,IAAA,SAAS,MAAf;AAAgB,IAAA,OAAO,EAAE,EAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,IAAD;AAAM,IAAA,IAAI,MAAV;AAAW,IAAA,EAAE,EAAC,GAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,eAEE,oBAAC,IAAD;AAAM,IAAA,IAAI,MAAV;AAAW,IAAA,EAAE,EAAC,GAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFF,eAGE,oBAAC,IAAD;AAAM,IAAA,IAAI,MAAV;AAAW,IAAA,EAAE,EAAC,GAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAHF,eAIE,oBAAC,IAAD;AAAM,IAAA,IAAI,MAAV;AAAW,IAAA,EAAE,EAAC,GAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAJF,eAKE,oBAAC,IAAD;AAAM,IAAA,IAAI,MAAV;AAAW,IAAA,EAAE,EAAC,GAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IALF,eAME,oBAAC,IAAD;AAAM,IAAA,IAAI,MAAV;AAAW,IAAA,EAAE,EAAC,GAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,MAAD;AAAQ,IAAA,OAAO,EAAE,MAAM;AAAEH,MAAAA,OAAO,CAACZ,IAAR,CAAa,wBAAb;AAAwC,KAAjE;AAAmE,IAAA,OAAO,EAAC,WAA3E;AAAuF,IAAA,KAAK,EAAC,SAA7F;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eADF,CANF,CAHF,eAiBE,oBAAC,IAAD;AAAM,IAAA,SAAS,MAAf;AAAgB,IAAA,OAAO,EAAE,CAAzB;AAA4B,IAAA,KAAK,EAAE;AAAEvB,MAAAA,YAAY,EAAE;AAAhB,KAAnC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,IAAD;AAAM,IAAA,IAAI,MAAV;AAAW,IAAA,EAAE,EAAE,EAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,eAEE,oBAAC,IAAD;AAAM,IAAA,IAAI,MAAV;AAAW,IAAA,EAAE,EAAE,EAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAUE,oBAAC,aAAD;AACE,IAAA,KAAK,EAAC,eADR;AAEE,IAAA,KAAK,EAAE;AAAEuC,MAAAA,MAAM,EAAE;AAAV,KAFT;AAGE,IAAA,OAAO,EAAE5D,OAHX;AAIE,IAAA,IAAI,EAAEN,MAJR;AAKE,IAAA,KAAK,EAAEzB,UALT,CAME;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAhBF;AAiBE,IAAA,OAAO,EAAE;AACP4F,MAAAA,YAAY,EAAE,IADP;AAEPC,MAAAA,SAAS,EAAE,IAFJ;AAGP;AACAC,MAAAA,kBAAkB,EAAE,CAAC,CAJd;AAKPC,MAAAA,MAAM,EAAE,IALD;AAMPC,MAAAA,cAAc,EAAE,QANT;AAOPC,MAAAA,QAAQ,EAAE,EAPH;AAQPC,MAAAA,eAAe,EAAE,CAAC,EAAD,EAAK,EAAL,EAAS,GAAT,EAAc,GAAd,EAAmB,GAAnB,EAAwB,GAAxB,EAA6B,GAA7B,EAAkC,GAAlC,EAAuC,GAAvC;AARV,KAjBX;AA2BE,IAAA,OAAO,EAAE,CACP;AACEC,MAAAA,OAAO,EAAE,2BADX;AAEEC,MAAAA,IAAI,EAAE7H,aAFR;AAGE8H,MAAAA,OAAO,EAAE,CAACC,GAAD,EAAM/E,IAAN,KAAegF,KAAK,CAAC,wBAAwBhF,IAAI,CAACyD,MAA7B,GAAsC,OAAvC;AAH/B,KADO,CA3BX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAVF,CAFF,CAjBF,CADF,CADF,CADF,CADF;AA6ED,CA9QD;;AAgRA,eAAe1D,YAAf","sourcesContent":["import React, { Fragment, useState, useEffect, forwardRef } from 'react';\nimport { Container } from 'reactstrap'\nimport MaterialTable from \"material-table\";\nimport { AddBox, ArrowDownward, Check, ChevronLeft, ChevronRight, Clear, DeleteOutline, Edit, FilterList, FirstPage, LastPage, Remove, ViewColumn, SaveAlt, Search } from \"@material-ui/icons\";\nimport axios from 'axios';\nimport { useHistory, withRouter, Link } from \"react-router-dom\";\n// import Alert from '@material-ui/lab/Alert';\nimport { toast } from 'react-toastify';\nimport Layout from \"../AppWrapper\"\nimport EditIcon from '@material-ui/icons/Edit';\nimport ConfirmDelete from './ConfirmDelete';\nimport { Button, Dialog, DialogActions, DialogContent, DialogContentText, DialogTitle ,Grid} from '@material-ui/core/';\nimport DeleteIcon from '@material-ui/icons/Delete';\n\n// import { Delete } from 'react-feather';\n\n\nconst tableIcons = {\n  Add: forwardRef((props, ref) => <Button {...props} ref={ref} variant=\"contained\" color=\"primary\" >Add New</Button>),\n  // Add: () => <Button variant=\"contained\" color=\"primary\" >Add New</Button> ,\n  Check: forwardRef((props, ref) => <Check {...props} ref={ref} />),\n  Clear: forwardRef((props, ref) => <Clear {...props} ref={ref} />),\n  Delete: forwardRef((props, ref) => <DeleteOutline {...props} ref={ref} />),\n  DetailPanel: forwardRef((props, ref) => <ChevronRight {...props} ref={ref} />),\n  Edit: forwardRef((props, ref) => <Edit {...props} ref={ref} />),\n  Export: forwardRef((props, ref) => <SaveAlt {...props} ref={ref} />),\n  Filter: forwardRef((props, ref) => <FilterList {...props} ref={ref} />),\n  FirstPage: forwardRef((props, ref) => <FirstPage {...props} ref={ref} />),\n  LastPage: forwardRef((props, ref) => <LastPage {...props} ref={ref} />),\n  NextPage: forwardRef((props, ref) => <ChevronRight {...props} ref={ref} />),\n  PreviousPage: forwardRef((props, ref) => <ChevronLeft {...props} ref={ref} />),\n  ResetSearch: forwardRef((props, ref) => <Clear {...props} ref={ref} />),\n  Search: forwardRef((props, ref) => <Search {...props} ref={ref} />),\n  SortArrow: forwardRef((props, ref) => <ArrowDownward {...props} ref={ref} />),\n  ThirdStateCheck: forwardRef((props, ref) => <Remove {...props} ref={ref} />),\n  ViewColumn: forwardRef((props, ref) => <ViewColumn {...props} ref={ref} />)\n};\n\n\nconst api = axios.create({\n  baseURL: `https://afya-kwanza-backend.herokuapp.com`\n})\n\nfunction validateEmail(email) {\n  const re = /^((?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|\"(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21\\x23-\\x5b\\x5d-\\x7f]|\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])*\")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21-\\x5a\\x53-\\x7f]|\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])+)\\]))$/;\n  return re.test(String(email).toLowerCase());\n}\n\n\n\nconst MembersTable = () => {\n  const [data, setData] = useState([]); //table data\n  const [riders, setRiders] = useState([])\n\n  //for error handling\n  const [iserror, setIserror] = useState(false)\n  const [errorMessages, setErrorMessages] = useState([])\n\n\n  var columns = [\n    { title: \"id\", field: \"id\", hidden: true },\n    // { title: \"Avatar\", render: rowData => <Avatar maxInitials={1} size={40} round={true} name={rowData === undefined ? \" \" : rowData.first_name} /> },\n    { title: \"Name\", field: \"name\" },\n    { title: \"Email\", field: \"email\" },\n    { title: \"Phone No\", field: \"phonenumber\" },\n    { title: \"Location\", field: \"location\" },\n    { title: \"Sacco\", field: \"sacco\" },\n    { title: \"Insruance Plan\", field: \"insurance_plan\" },\n    { cellStyle: {\n      paddingLeft: \"8%\"\n    },\n    headerStyle: {\n      paddingLeft: \"8%\"\n    },\n    render: rowData => (\n      <Link\n        to={{\n          pathname: \"/dashboard/members/edit\",\n          state: {\n           id:rowData.member_id\n          }\n        }}\n      >\n        {/* <IconButton aria-label=\"delete\"> */}\n        <EditIcon style={{ color: 'black' }} />\n        {/* </IconButton> */}\n      </Link>\n    )\n  },\n  { cellStyle: {\n      paddingRight: \"5%\"\n    },\n    headerStyle: {\n      paddingRight: \"5%\"\n    },\n    render: rowData => (\n    <div>\n\n      <DeleteIcon  onClick={handleClickOpen} style={{ cursor: 'pointer', color: 'red' }}/>\n      <Dialog\n      \n        open={open}\n        onClose={handleClose}\n        aria-labelledby=\"alert-dialog-title\"\n        aria-describedby=\"alert-dialog-description\"\n      >\n        <DialogTitle id=\"alert-dialog-title\"   style={{marginTop:'5%'}}>{\"Delete Sacco Member\"}</DialogTitle>\n        <DialogContent>\n          <DialogContentText id=\"alert-dialog-description\">\n                Are you sure you want to delete {name}?\n          </DialogContentText>\n        </DialogContent>\n        <DialogActions style={{ marginBottom:'5%'}} >\n          <Button onClick={onDelete} color=\"primary\">\n           Yes\n          </Button>\n          <Button onClick={handleClose} color=\"primary\" autoFocus>\n           No\n          </Button>\n        </DialogActions>\n      </Dialog>\n    </div>)\n  },\n\n  ]\n\n  // const res = await api.delete(`/members/delete/${id}`)\n  const handleDelete = async (id)=>{\n    try {\n      const res = await api.delete(`/members/delete/${id}`)\n      \n      const dataDelete = [...riders];\n      const afterDelete = dataDelete.filter(rider => rider.member_id !==id);\n      setRiders([...afterDelete]);\n      if (res.status == 200) {\n        toast.success(res.data)\n      }\n      \n    } catch (error) {\n      console.log(\"error occured=>\", error)\n      toast.error(error)\n    }\n    \n  }\n\n\n  useEffect(() => {\n    api.get('/members/all')\n      .then(res => {\n        // console.log(\"data =>\", res.data)\n        setRiders(res.data)\n        // console.log(\"riders =>\", riders)\n      }\n      ).catch(error => {\n        console.log(\"Error\", error)\n      })\n\n  }, [])\n\n\n  const handleRowUpdate = (newData, oldData, resolve) => {\n    //validation\n    // console.log(newData)\n    let errorList = []\n    if (newData.name === undefined) {\n      errorList.push(\"Please enter a name\")\n    }\n    if (newData.email === undefined) {\n      errorList.push(\"Please enter an email\")\n    }\n    if (newData.phonenumber === undefined) {\n      errorList.push(\"Please enter a phone number\")\n    }\n    if (newData.location === undefined) {\n      errorList.push(\"Please enter a location\")\n    }\n    if (newData.sacco === undefined) {\n      errorList.push(\"Please enter a sacco name\")\n    }\n    if (newData.insurance_plan === undefined) {\n      errorList.push(\"Please enter an insurance plan\")\n    }\n\n\n    if (errorList.length < 1) {\n      // console.log(newData.member_id)\n      api.put(\"/members/update/\" + newData.member_id, newData)\n        .then(res => {\n          // console.log(\"New data=>\",newData)\n          const dataUpdate = [...riders];\n          const index = oldData.tableData.id;\n          dataUpdate[index] = newData;\n          setRiders([...dataUpdate]);\n          console.log(\"Response status ==>\", res.status);\n          if (res.status == 201) {\n            toast.success(res.data)\n          }\n          resolve()\n          setIserror(false)\n          setErrorMessages([])\n        })\n        .catch(error => {\n          setErrorMessages([`Update failed: ${error}`])\n          toast.error(`Update failed: ${error}`);\n          setIserror(true)\n          resolve()\n\n        })\n    } else {\n      setErrorMessages(errorList)\n      setIserror(true)\n      resolve()\n\n    }\n\n  }\n\n\n  const handleRowDelete = (oldData, resolve) => {\n    api.delete(\"/members/delete/\" + oldData.member_id)\n      .then(res => {\n        const dataDelete = [...riders];\n        const index = oldData.tableData.id;\n        dataDelete.splice(index, 1);\n        setRiders([...dataDelete]);\n        // alert(res.data)\n        // console.log(\"API Response\",res)\n        if (res.status == 200) {\n          toast.success(res.data)\n        }\n        resolve()\n      })\n      .catch(error => {\n        console.log(error)\n        toast.error(`Delete failed:${error}`)\n        setIserror(true)\n        resolve()\n      })\n  }\n\n  const history = useHistory();\n\n\n  return (\n    <Layout>\n      <Fragment>\n        <Container fluid={true}>\n          <div style={{ width: '100%' }}>\n\n            <h3 style={{ paddingTop: '5%', marginBottom: '2.5%', textAlign: 'center' }}>Sacco Members Table</h3>\n            <Grid container spacing={10}>\n              <Grid item xs=\"2\"></Grid>\n              <Grid item xs=\"2\"></Grid>\n              <Grid item xs=\"2\"></Grid>\n              <Grid item xs=\"2\"></Grid>\n              <Grid item xs=\"2\"></Grid>\n              <Grid item xs=\"2\">\n                <Button onClick={() => { history.push('/dashboard/members/new') }} variant=\"contained\" color=\"primary\" >\n                  Add New\n                </Button>\n              </Grid>\n            </Grid>\n\n            {/* <Modal /> */}\n            <Grid container spacing={1} style={{ marginBottom: '6%' }}>\n              <Grid item xs={12}></Grid>\n              <Grid item xs={12}>\n                {/* <div>\n                {iserror &&\n                  <Alert severity=\"error\">\n                    {errorMessages.map((msg, i) => {\n                      return <div key={i}>{msg}</div>\n                    })}\n                  </Alert>\n                }\n              </div> */}\n                <MaterialTable\n                  title=\"Sacco Members\"\n                  style={{ zIndex: '0' }}\n                  columns={columns}\n                  data={riders}\n                  icons={tableIcons}\n                  // editable={{\n                  //   onRowUpdate: (oldData) =>\n                  //     new Promise((resolve) => {\n                  //       history.push('/dashboard/members/new', {email:oldData.email})\n\n                  //     }),\n                  //   onRowDelete: (oldData) =>\n                  //     new Promise((resolve) => {\n                  //       handleRowDelete(oldData, resolve)\n                  //     }),\n                  // }}\n                  options={{\n                    exportButton: true,\n                    selection: true,\n                    // filtering: true,\n                    actionsColumnIndex: -1,\n                    search: true,\n                    paginationType: 'normal',\n                    pageSize: 10,\n                    pageSizeOptions: [25, 50, 100, 200, 300, 400, 500, 600, 700]\n                  }}\n                  actions={[\n                    {\n                      tooltip: 'Remove All Selected Users',\n                      icon: DeleteOutline,\n                      onClick: (evt, data) => alert('You want to delete ' + data.length + ' rows')\n                    }\n                  ]}\n\n                />\n              </Grid>\n\n            </Grid>\n          </div>\n        </Container>\n      </Fragment>\n    </Layout>\n  );\n}\n\nexport default MembersTable"]},"metadata":{},"sourceType":"module"}