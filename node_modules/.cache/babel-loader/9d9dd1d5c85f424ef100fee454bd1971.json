{"ast":null,"code":"import _regeneratorRuntime from\"/Users/agwenchez/Desktop/Afya Kwanza/Super Admin Dashboard/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _toConsumableArray from\"/Users/agwenchez/Desktop/Afya Kwanza/Super Admin Dashboard/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _asyncToGenerator from\"/Users/agwenchez/Desktop/Afya Kwanza/Super Admin Dashboard/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/agwenchez/Desktop/Afya Kwanza/Super Admin Dashboard/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{Fragment,useState,useEffect,forwardRef}from'react';import{Container}from'reactstrap';import MaterialTable from\"material-table\";import{AddBox,ArrowDownward,Check,ChevronLeft,ChevronRight,Clear,DeleteOutline,Edit,FilterList,FirstPage,LastPage,Remove,ViewColumn,SaveAlt,Search}from\"@material-ui/icons\";import axios from'axios';import{useHistory,withRouter,Link}from\"react-router-dom\";// import Alert from '@material-ui/lab/Alert';\nimport{toast}from'react-toastify';import Layout from\"../AppWrapper\";import EditIcon from'@material-ui/icons/Edit';import ConfirmDelete from'./ConfirmDelete';import{Button,Grid}from'@material-ui/core/';import CustomizedProgressBars from'./CircularProgress';// import { Delete } from 'react-feather';\nvar tableIcons={Add:forwardRef(function(props,ref){return/*#__PURE__*/React.createElement(Button,Object.assign({},props,{ref:ref,variant:\"contained\",color:\"primary\"}),\"Add New\");}),// Add: () => <Button variant=\"contained\" color=\"primary\" >Add New</Button> ,\nCheck:forwardRef(function(props,ref){return/*#__PURE__*/React.createElement(Check,Object.assign({},props,{ref:ref}));}),Clear:forwardRef(function(props,ref){return/*#__PURE__*/React.createElement(Clear,Object.assign({},props,{ref:ref}));}),Delete:forwardRef(function(props,ref){return/*#__PURE__*/React.createElement(DeleteOutline,Object.assign({},props,{ref:ref}));}),DetailPanel:forwardRef(function(props,ref){return/*#__PURE__*/React.createElement(ChevronRight,Object.assign({},props,{ref:ref}));}),Edit:forwardRef(function(props,ref){return/*#__PURE__*/React.createElement(Edit,Object.assign({},props,{ref:ref}));}),Export:forwardRef(function(props,ref){return/*#__PURE__*/React.createElement(SaveAlt,Object.assign({},props,{ref:ref}));}),Filter:forwardRef(function(props,ref){return/*#__PURE__*/React.createElement(FilterList,Object.assign({},props,{ref:ref}));}),FirstPage:forwardRef(function(props,ref){return/*#__PURE__*/React.createElement(FirstPage,Object.assign({},props,{ref:ref}));}),LastPage:forwardRef(function(props,ref){return/*#__PURE__*/React.createElement(LastPage,Object.assign({},props,{ref:ref}));}),NextPage:forwardRef(function(props,ref){return/*#__PURE__*/React.createElement(ChevronRight,Object.assign({},props,{ref:ref}));}),PreviousPage:forwardRef(function(props,ref){return/*#__PURE__*/React.createElement(ChevronLeft,Object.assign({},props,{ref:ref}));}),ResetSearch:forwardRef(function(props,ref){return/*#__PURE__*/React.createElement(Clear,Object.assign({},props,{ref:ref}));}),Search:forwardRef(function(props,ref){return/*#__PURE__*/React.createElement(Search,Object.assign({},props,{ref:ref}));}),SortArrow:forwardRef(function(props,ref){return/*#__PURE__*/React.createElement(ArrowDownward,Object.assign({},props,{ref:ref}));}),ThirdStateCheck:forwardRef(function(props,ref){return/*#__PURE__*/React.createElement(Remove,Object.assign({},props,{ref:ref}));}),ViewColumn:forwardRef(function(props,ref){return/*#__PURE__*/React.createElement(ViewColumn,Object.assign({},props,{ref:ref}));})};var api=axios.create({baseURL:\"https://afya-kwanza-backend.herokuapp.com\"});function validateEmail(email){var re=/^((?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|\"(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21\\x23-\\x5b\\x5d-\\x7f]|\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])*\")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21-\\x5a\\x53-\\x7f]|\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])+)\\]))$/;return re.test(String(email).toLowerCase());}var MembersTable=function MembersTable(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),riders=_useState2[0],setRiders=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),loading=_useState4[0],setLoading=_useState4[1];var columns=[{title:\"id\",field:\"id\",hidden:true},// { title: \"Avatar\", render: rowData => <Avatar maxInitials={1} size={40} round={true} name={rowData === undefined ? \" \" : rowData.first_name} /> },\n{title:\"Name\",field:\"name\"},{title:\"Email\",field:\"email\"},{title:\"Phone No\",field:\"phonenumber\"},{title:\"Location\",field:\"location\"},{title:\"Sacco\",field:\"sacco\"},{title:\"Insruance Plan\",field:\"insurance_plan\"},{cellStyle:{paddingLeft:\"8%\"},headerStyle:{paddingLeft:\"8%\"},render:function render(rowData){return/*#__PURE__*/React.createElement(Link,{to:{pathname:\"/dashboard/members/edit\",state:{id:rowData.member_id}}},/*#__PURE__*/React.createElement(EditIcon,{style:{color:'black'}}));}},{cellStyle:{paddingRight:\"5%\"},headerStyle:{paddingRight:\"5%\"},render:function render(rowData){return/*#__PURE__*/React.createElement(ConfirmDelete,{onDelete:function onDelete(){return handleDelete(rowData.member_id);},name:rowData.name,openDialog:openDialog});}}];var openDialog=false;var handleDelete=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(id){var res,dataDelete,afterDelete;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return api.delete(\"/members/delete/\".concat(id));case 3:res=_context.sent;dataDelete=_toConsumableArray(riders);afterDelete=dataDelete.filter(function(rider){return rider.member_id!==id;});setRiders(_toConsumableArray(afterDelete));if(res.status==200){toast.success(res.data);}_context.next=14;break;case 10:_context.prev=10;_context.t0=_context[\"catch\"](0);console.log(\"error occured=>\",_context.t0);toast.error(_context.t0);case 14:case\"end\":return _context.stop();}}},_callee,null,[[0,10]]);}));return function handleDelete(_x){return _ref.apply(this,arguments);};}();var getMemmbers=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var res;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;setLoading(true);_context2.next=4;return api.get('/members/all');case 4:res=_context2.sent;// console.log(\"Data from API==>\", res.data)\nsetLoading(false);setRiders(res.data);_context2.next=12;break;case 9:_context2.prev=9;_context2.t0=_context2[\"catch\"](0);console.log(\"Error==>\",_context2.t0.message);case 12:case\"end\":return _context2.stop();}}},_callee2,null,[[0,9]]);}));return function getMemmbers(){return _ref2.apply(this,arguments);};}();useEffect(function(){getMemmbers();},[]);var history=useHistory();return/*#__PURE__*/React.createElement(Layout,null,/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Container,{fluid:true},/*#__PURE__*/React.createElement(\"div\",{style:{width:'100%'}},/*#__PURE__*/React.createElement(\"h3\",{style:{paddingTop:'5%',marginBottom:'2.5%',textAlign:'center'}},\"Sacco Members Table\"),/*#__PURE__*/React.createElement(Grid,{container:true,spacing:10},/*#__PURE__*/React.createElement(Grid,{item:true,xs:\"2\"}),/*#__PURE__*/React.createElement(Grid,{item:true,xs:\"2\"}),/*#__PURE__*/React.createElement(Grid,{item:true,xs:\"2\"}),/*#__PURE__*/React.createElement(Grid,{item:true,xs:\"2\"}),/*#__PURE__*/React.createElement(Grid,{item:true,xs:\"2\"}),/*#__PURE__*/React.createElement(Grid,{item:true,xs:\"2\"},/*#__PURE__*/React.createElement(Button,{onClick:function onClick(){history.push('/dashboard/members/new');},variant:\"contained\",color:\"primary\"},\"Add New\"))),/*#__PURE__*/React.createElement(Grid,{container:true,spacing:1,style:{marginBottom:'6%'}},/*#__PURE__*/React.createElement(Grid,{item:true,xs:12}),/*#__PURE__*/React.createElement(Grid,{item:true,xs:12},loading?/*#__PURE__*/React.createElement(CustomizedProgressBars,null):/*#__PURE__*/React.createElement(MaterialTable,{title:\"Sacco Members\",style:{zIndex:'0'},columns:columns,data:riders,icons:tableIcons,options:{exportButton:true,selection:true,// filtering: true,\nactionsColumnIndex:-1,search:true,paginationType:'normal',pageSize:10,pageSizeOptions:[25,50,100,200,300,400,500,600,700]},actions:[{tooltip:'Remove All Selected Users',icon:DeleteOutline,onClick:function onClick(evt,data){return alert('You want to delete '+data.length+' rows');}}]})))))));};export default MembersTable;","map":{"version":3,"sources":["/Users/agwenchez/Desktop/Afya Kwanza/Super Admin Dashboard/src/components/new/MembersTable.jsx"],"names":["React","Fragment","useState","useEffect","forwardRef","Container","MaterialTable","AddBox","ArrowDownward","Check","ChevronLeft","ChevronRight","Clear","DeleteOutline","Edit","FilterList","FirstPage","LastPage","Remove","ViewColumn","SaveAlt","Search","axios","useHistory","withRouter","Link","toast","Layout","EditIcon","ConfirmDelete","Button","Grid","CustomizedProgressBars","tableIcons","Add","props","ref","Delete","DetailPanel","Export","Filter","NextPage","PreviousPage","ResetSearch","SortArrow","ThirdStateCheck","api","create","baseURL","validateEmail","email","re","test","String","toLowerCase","MembersTable","riders","setRiders","loading","setLoading","columns","title","field","hidden","cellStyle","paddingLeft","headerStyle","render","rowData","pathname","state","id","member_id","color","paddingRight","handleDelete","name","openDialog","delete","res","dataDelete","afterDelete","filter","rider","status","success","data","console","log","error","getMemmbers","get","message","history","width","paddingTop","marginBottom","textAlign","push","zIndex","exportButton","selection","actionsColumnIndex","search","paginationType","pageSize","pageSizeOptions","tooltip","icon","onClick","evt","alert","length"],"mappings":"ysBAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,QAA1B,CAAoCC,SAApC,CAA+CC,UAA/C,KAAiE,OAAjE,CACA,OAASC,SAAT,KAA0B,YAA1B,CACA,MAAOC,CAAAA,aAAP,KAA0B,gBAA1B,CACA,OAASC,MAAT,CAAiBC,aAAjB,CAAgCC,KAAhC,CAAuCC,WAAvC,CAAoDC,YAApD,CAAkEC,KAAlE,CAAyEC,aAAzE,CAAwFC,IAAxF,CAA8FC,UAA9F,CAA0GC,SAA1G,CAAqHC,QAArH,CAA+HC,MAA/H,CAAuIC,UAAvI,CAAmJC,OAAnJ,CAA4JC,MAA5J,KAA0K,oBAA1K,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,UAAT,CAAqBC,UAArB,CAAiCC,IAAjC,KAA6C,kBAA7C,CACA;AACA,OAASC,KAAT,KAAsB,gBAAtB,CACA,MAAOC,CAAAA,MAAP,KAAmB,eAAnB,CACA,MAAOC,CAAAA,QAAP,KAAqB,yBAArB,CACA,MAAOC,CAAAA,aAAP,KAA0B,iBAA1B,CACA,OAASC,MAAT,CAAiBC,IAAjB,KAA6B,oBAA7B,CACA,MAAOC,CAAAA,sBAAP,KAAmC,oBAAnC,CAEA;AAGA,GAAMC,CAAAA,UAAU,CAAG,CACjBC,GAAG,CAAE9B,UAAU,CAAC,SAAC+B,KAAD,CAAQC,GAAR,qBAAgB,oBAAC,MAAD,kBAAYD,KAAZ,EAAmB,GAAG,CAAEC,GAAxB,CAA6B,OAAO,CAAC,WAArC,CAAiD,KAAK,CAAC,SAAvD,aAAhB,EAAD,CADE,CAEjB;AACA3B,KAAK,CAAEL,UAAU,CAAC,SAAC+B,KAAD,CAAQC,GAAR,qBAAgB,oBAAC,KAAD,kBAAWD,KAAX,EAAkB,GAAG,CAAEC,GAAvB,GAAhB,EAAD,CAHA,CAIjBxB,KAAK,CAAER,UAAU,CAAC,SAAC+B,KAAD,CAAQC,GAAR,qBAAgB,oBAAC,KAAD,kBAAWD,KAAX,EAAkB,GAAG,CAAEC,GAAvB,GAAhB,EAAD,CAJA,CAKjBC,MAAM,CAAEjC,UAAU,CAAC,SAAC+B,KAAD,CAAQC,GAAR,qBAAgB,oBAAC,aAAD,kBAAmBD,KAAnB,EAA0B,GAAG,CAAEC,GAA/B,GAAhB,EAAD,CALD,CAMjBE,WAAW,CAAElC,UAAU,CAAC,SAAC+B,KAAD,CAAQC,GAAR,qBAAgB,oBAAC,YAAD,kBAAkBD,KAAlB,EAAyB,GAAG,CAAEC,GAA9B,GAAhB,EAAD,CANN,CAOjBtB,IAAI,CAAEV,UAAU,CAAC,SAAC+B,KAAD,CAAQC,GAAR,qBAAgB,oBAAC,IAAD,kBAAUD,KAAV,EAAiB,GAAG,CAAEC,GAAtB,GAAhB,EAAD,CAPC,CAQjBG,MAAM,CAAEnC,UAAU,CAAC,SAAC+B,KAAD,CAAQC,GAAR,qBAAgB,oBAAC,OAAD,kBAAaD,KAAb,EAAoB,GAAG,CAAEC,GAAzB,GAAhB,EAAD,CARD,CASjBI,MAAM,CAAEpC,UAAU,CAAC,SAAC+B,KAAD,CAAQC,GAAR,qBAAgB,oBAAC,UAAD,kBAAgBD,KAAhB,EAAuB,GAAG,CAAEC,GAA5B,GAAhB,EAAD,CATD,CAUjBpB,SAAS,CAAEZ,UAAU,CAAC,SAAC+B,KAAD,CAAQC,GAAR,qBAAgB,oBAAC,SAAD,kBAAeD,KAAf,EAAsB,GAAG,CAAEC,GAA3B,GAAhB,EAAD,CAVJ,CAWjBnB,QAAQ,CAAEb,UAAU,CAAC,SAAC+B,KAAD,CAAQC,GAAR,qBAAgB,oBAAC,QAAD,kBAAcD,KAAd,EAAqB,GAAG,CAAEC,GAA1B,GAAhB,EAAD,CAXH,CAYjBK,QAAQ,CAAErC,UAAU,CAAC,SAAC+B,KAAD,CAAQC,GAAR,qBAAgB,oBAAC,YAAD,kBAAkBD,KAAlB,EAAyB,GAAG,CAAEC,GAA9B,GAAhB,EAAD,CAZH,CAajBM,YAAY,CAAEtC,UAAU,CAAC,SAAC+B,KAAD,CAAQC,GAAR,qBAAgB,oBAAC,WAAD,kBAAiBD,KAAjB,EAAwB,GAAG,CAAEC,GAA7B,GAAhB,EAAD,CAbP,CAcjBO,WAAW,CAAEvC,UAAU,CAAC,SAAC+B,KAAD,CAAQC,GAAR,qBAAgB,oBAAC,KAAD,kBAAWD,KAAX,EAAkB,GAAG,CAAEC,GAAvB,GAAhB,EAAD,CAdN,CAejBf,MAAM,CAAEjB,UAAU,CAAC,SAAC+B,KAAD,CAAQC,GAAR,qBAAgB,oBAAC,MAAD,kBAAYD,KAAZ,EAAmB,GAAG,CAAEC,GAAxB,GAAhB,EAAD,CAfD,CAgBjBQ,SAAS,CAAExC,UAAU,CAAC,SAAC+B,KAAD,CAAQC,GAAR,qBAAgB,oBAAC,aAAD,kBAAmBD,KAAnB,EAA0B,GAAG,CAAEC,GAA/B,GAAhB,EAAD,CAhBJ,CAiBjBS,eAAe,CAAEzC,UAAU,CAAC,SAAC+B,KAAD,CAAQC,GAAR,qBAAgB,oBAAC,MAAD,kBAAYD,KAAZ,EAAmB,GAAG,CAAEC,GAAxB,GAAhB,EAAD,CAjBV,CAkBjBjB,UAAU,CAAEf,UAAU,CAAC,SAAC+B,KAAD,CAAQC,GAAR,qBAAgB,oBAAC,UAAD,kBAAgBD,KAAhB,EAAuB,GAAG,CAAEC,GAA5B,GAAhB,EAAD,CAlBL,CAAnB,CAsBA,GAAMU,CAAAA,GAAG,CAAGxB,KAAK,CAACyB,MAAN,CAAa,CACvBC,OAAO,4CADgB,CAAb,CAAZ,CAIA,QAASC,CAAAA,aAAT,CAAuBC,KAAvB,CAA8B,CAC5B,GAAMC,CAAAA,EAAE,CAAG,gbAAX,CACA,MAAOA,CAAAA,EAAE,CAACC,IAAH,CAAQC,MAAM,CAACH,KAAD,CAAN,CAAcI,WAAd,EAAR,CAAP,CACD,CAID,GAAMC,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,EAAM,eACGrD,QAAQ,CAAC,EAAD,CADX,wCAClBsD,MADkB,eACVC,SADU,8BAEKvD,QAAQ,CAAC,KAAD,CAFb,yCAElBwD,OAFkB,eAETC,UAFS,eAKzB,GAAIC,CAAAA,OAAO,CAAG,CACZ,CAAEC,KAAK,CAAE,IAAT,CAAeC,KAAK,CAAE,IAAtB,CAA4BC,MAAM,CAAE,IAApC,CADY,CAEZ;AACA,CAAEF,KAAK,CAAE,MAAT,CAAiBC,KAAK,CAAE,MAAxB,CAHY,CAIZ,CAAED,KAAK,CAAE,OAAT,CAAkBC,KAAK,CAAE,OAAzB,CAJY,CAKZ,CAAED,KAAK,CAAE,UAAT,CAAqBC,KAAK,CAAE,aAA5B,CALY,CAMZ,CAAED,KAAK,CAAE,UAAT,CAAqBC,KAAK,CAAE,UAA5B,CANY,CAOZ,CAAED,KAAK,CAAE,OAAT,CAAkBC,KAAK,CAAE,OAAzB,CAPY,CAQZ,CAAED,KAAK,CAAE,gBAAT,CAA2BC,KAAK,CAAE,gBAAlC,CARY,CASZ,CACEE,SAAS,CAAE,CACTC,WAAW,CAAE,IADJ,CADb,CAIEC,WAAW,CAAE,CACXD,WAAW,CAAE,IADF,CAJf,CAOEE,MAAM,CAAE,gBAAAC,OAAO,qBACb,oBAAC,IAAD,EACE,EAAE,CAAE,CACFC,QAAQ,CAAE,yBADR,CAEFC,KAAK,CAAE,CACLC,EAAE,CAAEH,OAAO,CAACI,SADP,CAFL,CADN,eASE,oBAAC,QAAD,EAAU,KAAK,CAAE,CAAEC,KAAK,CAAE,OAAT,CAAjB,EATF,CADa,EAPjB,CATY,CA+BZ,CACET,SAAS,CAAE,CACTU,YAAY,CAAE,IADL,CADb,CAIER,WAAW,CAAE,CACXQ,YAAY,CAAE,IADH,CAJf,CAOEP,MAAM,CAAE,gBAAAC,OAAO,qBAAK,oBAAC,aAAD,EAAe,QAAQ,CAAE,0BAAMO,CAAAA,YAAY,CAACP,OAAO,CAACI,SAAT,CAAlB,EAAzB,CAAgE,IAAI,CAAEJ,OAAO,CAACQ,IAA9E,CAAoF,UAAU,CAAEC,UAAhG,EAAL,EAPjB,CA/BY,CAAd,CA2CA,GAAIA,CAAAA,UAAU,CAAG,KAAjB,CAEA,GAAMF,CAAAA,YAAY,0FAAG,iBAAOJ,EAAP,uLAECzB,CAAAA,GAAG,CAACgC,MAAJ,2BAA8BP,EAA9B,EAFD,QAEXQ,GAFW,eAGXC,UAHW,oBAGMxB,MAHN,EAIXyB,WAJW,CAIGD,UAAU,CAACE,MAAX,CAAkB,SAAAC,KAAK,QAAIA,CAAAA,KAAK,CAACX,SAAN,GAAoBD,EAAxB,EAAvB,CAJH,CAMjBd,SAAS,oBAAKwB,WAAL,EAAT,CACA,GAAIF,GAAG,CAACK,MAAJ,EAAc,GAAlB,CAAuB,CACrB1D,KAAK,CAAC2D,OAAN,CAAcN,GAAG,CAACO,IAAlB,EACD,CATgB,iFAYjBC,OAAO,CAACC,GAAR,CAAY,iBAAZ,cACA9D,KAAK,CAAC+D,KAAN,cAbiB,qEAAH,kBAAZd,CAAAA,YAAY,4CAAlB,CAkBA,GAAMe,CAAAA,WAAW,2FAAG,iKAEhB/B,UAAU,CAAC,IAAD,CAAV,CAFgB,uBAGEb,CAAAA,GAAG,CAAC6C,GAAJ,CAAQ,cAAR,CAHF,QAGVZ,GAHU,gBAIhB;AACApB,UAAU,CAAC,KAAD,CAAV,CACAF,SAAS,CAACsB,GAAG,CAACO,IAAL,CAAT,CANgB,mFAShBC,OAAO,CAACC,GAAR,CAAY,UAAZ,CAAwB,aAAMI,OAA9B,EATgB,sEAAH,kBAAXF,CAAAA,WAAW,2CAAjB,CAaAvF,SAAS,CAAC,UAAM,CAEduF,WAAW,GAEZ,CAJQ,CAIN,EAJM,CAAT,CAQA,GAAMG,CAAAA,OAAO,CAAGtE,UAAU,EAA1B,CAGA,mBACE,oBAAC,MAAD,mBACE,qDACE,oBAAC,SAAD,EAAW,KAAK,CAAE,IAAlB,eACE,2BAAK,KAAK,CAAE,CAAEuE,KAAK,CAAE,MAAT,CAAZ,eAEE,0BAAI,KAAK,CAAE,CAAEC,UAAU,CAAE,IAAd,CAAoBC,YAAY,CAAE,MAAlC,CAA0CC,SAAS,CAAE,QAArD,CAAX,wBAFF,cAGE,oBAAC,IAAD,EAAM,SAAS,KAAf,CAAgB,OAAO,CAAE,EAAzB,eACE,oBAAC,IAAD,EAAM,IAAI,KAAV,CAAW,EAAE,CAAC,GAAd,EADF,cAEE,oBAAC,IAAD,EAAM,IAAI,KAAV,CAAW,EAAE,CAAC,GAAd,EAFF,cAGE,oBAAC,IAAD,EAAM,IAAI,KAAV,CAAW,EAAE,CAAC,GAAd,EAHF,cAIE,oBAAC,IAAD,EAAM,IAAI,KAAV,CAAW,EAAE,CAAC,GAAd,EAJF,cAKE,oBAAC,IAAD,EAAM,IAAI,KAAV,CAAW,EAAE,CAAC,GAAd,EALF,cAME,oBAAC,IAAD,EAAM,IAAI,KAAV,CAAW,EAAE,CAAC,GAAd,eACE,oBAAC,MAAD,EAAQ,OAAO,CAAE,kBAAM,CAAEJ,OAAO,CAACK,IAAR,CAAa,wBAAb,EAAwC,CAAjE,CAAmE,OAAO,CAAC,WAA3E,CAAuF,KAAK,CAAC,SAA7F,YADF,CANF,CAHF,cAiBE,oBAAC,IAAD,EAAM,SAAS,KAAf,CAAgB,OAAO,CAAE,CAAzB,CAA4B,KAAK,CAAE,CAAEF,YAAY,CAAE,IAAhB,CAAnC,eACE,oBAAC,IAAD,EAAM,IAAI,KAAV,CAAW,EAAE,CAAE,EAAf,EADF,cAEE,oBAAC,IAAD,EAAM,IAAI,KAAV,CAAW,EAAE,CAAE,EAAf,EAEGtC,OAAO,cAAI,oBAAC,sBAAD,MAAJ,cACL,oBAAC,aAAD,EACC,KAAK,CAAC,eADP,CAEC,KAAK,CAAE,CAAEyC,MAAM,CAAE,GAAV,CAFR,CAGC,OAAO,CAAEvC,OAHV,CAIC,IAAI,CAAEJ,MAJP,CAKC,KAAK,CAAEvB,UALR,CAMC,OAAO,CAAE,CACPmE,YAAY,CAAE,IADP,CAEPC,SAAS,CAAE,IAFJ,CAGP;AACAC,kBAAkB,CAAE,CAAC,CAJd,CAKPC,MAAM,CAAE,IALD,CAMPC,cAAc,CAAE,QANT,CAOPC,QAAQ,CAAE,EAPH,CAQPC,eAAe,CAAE,CAAC,EAAD,CAAK,EAAL,CAAS,GAAT,CAAc,GAAd,CAAmB,GAAnB,CAAwB,GAAxB,CAA6B,GAA7B,CAAkC,GAAlC,CAAuC,GAAvC,CARV,CANV,CAgBC,OAAO,CAAE,CACP,CACEC,OAAO,CAAE,2BADX,CAEEC,IAAI,CAAE/F,aAFR,CAGEgG,OAAO,CAAE,iBAACC,GAAD,CAAMxB,IAAN,QAAeyB,CAAAA,KAAK,CAAC,sBAAwBzB,IAAI,CAAC0B,MAA7B,CAAsC,OAAvC,CAApB,EAHX,CADO,CAhBV,EAHL,CAFF,CAjBF,CADF,CADF,CADF,CADF,CA2DD,CAvJD,CAyJA,cAAezD,CAAAA,YAAf","sourcesContent":["import React, { Fragment, useState, useEffect, forwardRef } from 'react';\nimport { Container } from 'reactstrap'\nimport MaterialTable from \"material-table\";\nimport { AddBox, ArrowDownward, Check, ChevronLeft, ChevronRight, Clear, DeleteOutline, Edit, FilterList, FirstPage, LastPage, Remove, ViewColumn, SaveAlt, Search } from \"@material-ui/icons\";\nimport axios from 'axios';\nimport { useHistory, withRouter, Link } from \"react-router-dom\";\n// import Alert from '@material-ui/lab/Alert';\nimport { toast } from 'react-toastify';\nimport Layout from \"../AppWrapper\"\nimport EditIcon from '@material-ui/icons/Edit';\nimport ConfirmDelete from './ConfirmDelete';\nimport { Button, Grid } from '@material-ui/core/';\nimport CustomizedProgressBars from './CircularProgress';\n\n// import { Delete } from 'react-feather';\n\n\nconst tableIcons = {\n  Add: forwardRef((props, ref) => <Button {...props} ref={ref} variant=\"contained\" color=\"primary\" >Add New</Button>),\n  // Add: () => <Button variant=\"contained\" color=\"primary\" >Add New</Button> ,\n  Check: forwardRef((props, ref) => <Check {...props} ref={ref} />),\n  Clear: forwardRef((props, ref) => <Clear {...props} ref={ref} />),\n  Delete: forwardRef((props, ref) => <DeleteOutline {...props} ref={ref} />),\n  DetailPanel: forwardRef((props, ref) => <ChevronRight {...props} ref={ref} />),\n  Edit: forwardRef((props, ref) => <Edit {...props} ref={ref} />),\n  Export: forwardRef((props, ref) => <SaveAlt {...props} ref={ref} />),\n  Filter: forwardRef((props, ref) => <FilterList {...props} ref={ref} />),\n  FirstPage: forwardRef((props, ref) => <FirstPage {...props} ref={ref} />),\n  LastPage: forwardRef((props, ref) => <LastPage {...props} ref={ref} />),\n  NextPage: forwardRef((props, ref) => <ChevronRight {...props} ref={ref} />),\n  PreviousPage: forwardRef((props, ref) => <ChevronLeft {...props} ref={ref} />),\n  ResetSearch: forwardRef((props, ref) => <Clear {...props} ref={ref} />),\n  Search: forwardRef((props, ref) => <Search {...props} ref={ref} />),\n  SortArrow: forwardRef((props, ref) => <ArrowDownward {...props} ref={ref} />),\n  ThirdStateCheck: forwardRef((props, ref) => <Remove {...props} ref={ref} />),\n  ViewColumn: forwardRef((props, ref) => <ViewColumn {...props} ref={ref} />)\n};\n\n\nconst api = axios.create({\n  baseURL: `https://afya-kwanza-backend.herokuapp.com`\n})\n\nfunction validateEmail(email) {\n  const re = /^((?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|\"(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21\\x23-\\x5b\\x5d-\\x7f]|\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])*\")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21-\\x5a\\x53-\\x7f]|\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])+)\\]))$/;\n  return re.test(String(email).toLowerCase());\n}\n\n\n\nconst MembersTable = () => {\n  const [riders, setRiders] = useState([])\n  const [loading, setLoading] = useState(false)\n\n\n  var columns = [\n    { title: \"id\", field: \"id\", hidden: true },\n    // { title: \"Avatar\", render: rowData => <Avatar maxInitials={1} size={40} round={true} name={rowData === undefined ? \" \" : rowData.first_name} /> },\n    { title: \"Name\", field: \"name\" },\n    { title: \"Email\", field: \"email\" },\n    { title: \"Phone No\", field: \"phonenumber\" },\n    { title: \"Location\", field: \"location\" },\n    { title: \"Sacco\", field: \"sacco\" },\n    { title: \"Insruance Plan\", field: \"insurance_plan\" },\n    {\n      cellStyle: {\n        paddingLeft: \"8%\"\n      },\n      headerStyle: {\n        paddingLeft: \"8%\"\n      },\n      render: rowData => (\n        <Link\n          to={{\n            pathname: \"/dashboard/members/edit\",\n            state: {\n              id: rowData.member_id\n            }\n          }}\n        >\n          {/* <IconButton aria-label=\"delete\"> */}\n          <EditIcon style={{ color: 'black' }} />\n          {/* </IconButton> */}\n        </Link>\n      )\n    },\n    {\n      cellStyle: {\n        paddingRight: \"5%\"\n      },\n      headerStyle: {\n        paddingRight: \"5%\"\n      },\n      render: rowData => (<ConfirmDelete onDelete={() => handleDelete(rowData.member_id)} name={rowData.name} openDialog={openDialog} />)\n    },\n\n  ]\n\n  let openDialog = false;\n\n  const handleDelete = async (id) => {\n    try {\n      const res = await api.delete(`/members/delete/${id}`)\n      const dataDelete = [...riders];\n      const afterDelete = dataDelete.filter(rider => rider.member_id !== id);\n\n      setRiders([...afterDelete]);\n      if (res.status == 200) {\n        toast.success(res.data)\n      }\n\n    } catch (error) {\n      console.log(\"error occured=>\", error)\n      toast.error(error)\n    }\n\n  }\n\n  const getMemmbers = async () => {\n    try {\n      setLoading(true)\n      const res = await api.get('/members/all')\n      // console.log(\"Data from API==>\", res.data)\n      setLoading(false)\n      setRiders(res.data)\n\n    } catch (error) {\n      console.log(\"Error==>\", error.message)\n    }\n  }\n\n  useEffect(() => {\n\n    getMemmbers()\n\n  }, [])\n\n\n\n  const history = useHistory();\n\n\n  return (\n    <Layout>\n      <>\n        <Container fluid={true}>\n          <div style={{ width: '100%' }}>\n\n            <h3 style={{ paddingTop: '5%', marginBottom: '2.5%', textAlign: 'center' }}>Sacco Members Table</h3>\n            <Grid container spacing={10}>\n              <Grid item xs=\"2\"></Grid>\n              <Grid item xs=\"2\"></Grid>\n              <Grid item xs=\"2\"></Grid>\n              <Grid item xs=\"2\"></Grid>\n              <Grid item xs=\"2\"></Grid>\n              <Grid item xs=\"2\">\n                <Button onClick={() => { history.push('/dashboard/members/new') }} variant=\"contained\" color=\"primary\" >\n                  Add New\n                </Button>\n              </Grid>\n            </Grid>\n\n            {/* <Modal /> */}\n            <Grid container spacing={1} style={{ marginBottom: '6%' }}>\n              <Grid item xs={12}></Grid>\n              <Grid item xs={12}>\n\n                {loading ? (<CustomizedProgressBars />) :\n                  (<MaterialTable\n                    title=\"Sacco Members\"\n                    style={{ zIndex: '0' }}\n                    columns={columns}\n                    data={riders}\n                    icons={tableIcons}\n                    options={{\n                      exportButton: true,\n                      selection: true,\n                      // filtering: true,\n                      actionsColumnIndex: -1,\n                      search: true,\n                      paginationType: 'normal',\n                      pageSize: 10,\n                      pageSizeOptions: [25, 50, 100, 200, 300, 400, 500, 600, 700]\n                    }}\n                    actions={[\n                      {\n                        tooltip: 'Remove All Selected Users',\n                        icon: DeleteOutline,\n                        onClick: (evt, data) => alert('You want to delete ' + data.length + ' rows')\n                      }\n                    ]}\n\n                  />)}\n              </Grid>\n\n            </Grid>\n          </div>\n        </Container>\n      </>\n    </Layout>\n  );\n}\n\nexport default MembersTable"]},"metadata":{},"sourceType":"module"}