{"ast":null,"code":"import _regeneratorRuntime from\"/Users/agwenchez/Desktop/Afya Kwanza/Super Admin Dashboard/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _toConsumableArray from\"/Users/agwenchez/Desktop/Afya Kwanza/Super Admin Dashboard/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _asyncToGenerator from\"/Users/agwenchez/Desktop/Afya Kwanza/Super Admin Dashboard/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/agwenchez/Desktop/Afya Kwanza/Super Admin Dashboard/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{Fragment,useState,useEffect,forwardRef}from'react';import{Container}from'reactstrap';import{Grid,Button,IconButton}from'@material-ui/core/';import MaterialTable from\"material-table\";import{AddBox,ArrowDownward,Check,ChevronLeft,ChevronRight,Clear,DeleteOutline,Edit,FilterList,FirstPage,LastPage,Remove,ViewColumn,SaveAlt,Search}from\"@material-ui/icons\";import axios from'axios';import{useHistory,withRouter,Link}from\"react-router-dom\";// import Alert from '@material-ui/lab/Alert';\nimport{toast}from'react-toastify';import Modal from'./modal';import Layout from\"../AppWrapper\";import EditIcon from'@material-ui/icons/Edit';import DeleteIcon from'@material-ui/icons/Delete';import Avatar from'react-avatar';import ConfirmDelete from'./ConfirmDelete';// import { Delete } from 'react-feather';\nvar tableIcons={Add:forwardRef(function(props,ref){return/*#__PURE__*/React.createElement(Button,Object.assign({},props,{ref:ref,variant:\"contained\",color:\"primary\"}),\"Add New\");}),// Add: () => <Button variant=\"contained\" color=\"primary\" >Add New</Button> ,\nCheck:forwardRef(function(props,ref){return/*#__PURE__*/React.createElement(Check,Object.assign({},props,{ref:ref}));}),Clear:forwardRef(function(props,ref){return/*#__PURE__*/React.createElement(Clear,Object.assign({},props,{ref:ref}));}),Delete:forwardRef(function(props,ref){return/*#__PURE__*/React.createElement(DeleteOutline,Object.assign({},props,{ref:ref}));}),DetailPanel:forwardRef(function(props,ref){return/*#__PURE__*/React.createElement(ChevronRight,Object.assign({},props,{ref:ref}));}),Edit:forwardRef(function(props,ref){return/*#__PURE__*/React.createElement(Edit,Object.assign({},props,{ref:ref}));}),Export:forwardRef(function(props,ref){return/*#__PURE__*/React.createElement(SaveAlt,Object.assign({},props,{ref:ref}));}),Filter:forwardRef(function(props,ref){return/*#__PURE__*/React.createElement(FilterList,Object.assign({},props,{ref:ref}));}),FirstPage:forwardRef(function(props,ref){return/*#__PURE__*/React.createElement(FirstPage,Object.assign({},props,{ref:ref}));}),LastPage:forwardRef(function(props,ref){return/*#__PURE__*/React.createElement(LastPage,Object.assign({},props,{ref:ref}));}),NextPage:forwardRef(function(props,ref){return/*#__PURE__*/React.createElement(ChevronRight,Object.assign({},props,{ref:ref}));}),PreviousPage:forwardRef(function(props,ref){return/*#__PURE__*/React.createElement(ChevronLeft,Object.assign({},props,{ref:ref}));}),ResetSearch:forwardRef(function(props,ref){return/*#__PURE__*/React.createElement(Clear,Object.assign({},props,{ref:ref}));}),Search:forwardRef(function(props,ref){return/*#__PURE__*/React.createElement(Search,Object.assign({},props,{ref:ref}));}),SortArrow:forwardRef(function(props,ref){return/*#__PURE__*/React.createElement(ArrowDownward,Object.assign({},props,{ref:ref}));}),ThirdStateCheck:forwardRef(function(props,ref){return/*#__PURE__*/React.createElement(Remove,Object.assign({},props,{ref:ref}));}),ViewColumn:forwardRef(function(props,ref){return/*#__PURE__*/React.createElement(ViewColumn,Object.assign({},props,{ref:ref}));})};var api=axios.create({baseURL:\"https://afya-kwanza-backend.herokuapp.com\"});function validateEmail(email){var re=/^((?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|\"(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21\\x23-\\x5b\\x5d-\\x7f]|\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])*\")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21-\\x5a\\x53-\\x7f]|\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])+)\\]))$/;return re.test(String(email).toLowerCase());}var SaccoTable=function SaccoTable(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),data=_useState2[0],setData=_useState2[1];//table data\nvar _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),riders=_useState4[0],setRiders=_useState4[1];//for error handling\nvar _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),iserror=_useState6[0],setIserror=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),errorMessages=_useState8[0],setErrorMessages=_useState8[1];var history=useHistory();var columns=[// { title: \"Avatar\", render: rowData => <Avatar maxInitials={1} size={40} round={true} name={rowData === undefined ? \" \" : rowData.sacco_name} /> },\n{title:\"Sacco Name\",field:\"sacco_name\"},{title:\"Admin FirstName\",field:\"admin_firstname\"},{title:\"Admin LastName\",field:\"admin_lastname\"},{title:\"Admin email\",field:\"admin_email\",headerStyle:{paddingRight:\"1%\"}},{title:\"Phone No\",field:\"admin_phonenumber\"},{title:\"Sacco Email\",field:\"sacco_email\"},{cellStyle:{paddingLeft:\"6%\"},headerStyle:{paddingLeft:\"6%\"},render:function render(rowData){return/*#__PURE__*/React.createElement(Link,{to:{pathname:\"/dashboard/saccos/edit\",state:{sacco_name:rowData.sacco_name,id:rowData.sacco_id}}},/*#__PURE__*/React.createElement(EditIcon,{style:{color:'black'}}));}},{cellStyle:{paddingRight:\"5%\"},headerStyle:{paddingRight:\"5%\"},render:function render(rowData){return/*#__PURE__*/React.createElement(ConfirmDelete,{onDelete:function onDelete(){return handleDelete(rowData.sacco_id);},name:rowData.sacco_name});}}];var handleDelete=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(id){var res,dataDelete,afterDelete,dialog;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return api.delete(\"/saccos/delete/\".concat(id));case 3:res=_context.sent;dataDelete=_toConsumableArray(riders);afterDelete=dataDelete.filter(function(sacco){return sacco.sacco_id!==id;});dialog=document.getElementById('confirm_delete');dialog.style.display='none';setRiders(_toConsumableArray(afterDelete));res.status==200&&toast.success(res.data);_context.next=16;break;case 12:_context.prev=12;_context.t0=_context[\"catch\"](0);console.log(\"error occured=>\",_context.t0.message);_context.t0.message=='Request failed with status code 500'&&toast.error('You cant delete a sacco that has members');case 16:case\"end\":return _context.stop();}}},_callee,null,[[0,12]]);}));return function handleDelete(_x){return _ref.apply(this,arguments);};}();useEffect(function(){api.get('/saccos/all').then(function(res){// console.log(\"data =>\", res.data)\nsetRiders(res.data);// console.log(\"saccos =>\", riders)\n}).catch(function(error){console.log(\"Error\",error);});},[]);// const redirectToReport = (rowData) => {\n//   // const { history } = props;\n//   history.push({\n//     pathname: \"/dashboard/saccos/profile\", // re-route to this path\n//     state: { sacco_name: rowData.sacco_email, surname: rowData.admin_email } // your row data\n//   });\n// };\nreturn/*#__PURE__*/React.createElement(Layout,null,/*#__PURE__*/React.createElement(Fragment,null,/*#__PURE__*/React.createElement(Container,{fluid:true},/*#__PURE__*/React.createElement(\"div\",{style:{width:'100%'}},/*#__PURE__*/React.createElement(\"h3\",{style:{paddingTop:'5%',marginBottom:'2.5%',textAlign:'center'}},\"Saccos Table\"),/*#__PURE__*/React.createElement(Grid,{container:true,spacing:10},/*#__PURE__*/React.createElement(Grid,{item:true,xs:\"2\"}),/*#__PURE__*/React.createElement(Grid,{item:true,xs:\"2\"}),/*#__PURE__*/React.createElement(Grid,{item:true,xs:\"2\"}),/*#__PURE__*/React.createElement(Grid,{item:true,xs:\"2\"}),/*#__PURE__*/React.createElement(Grid,{item:true,xs:\"2\"}),/*#__PURE__*/React.createElement(Grid,{item:true,xs:\"2\"},/*#__PURE__*/React.createElement(Button,{onClick:function onClick(){history.push('/dashboard/saccos/new');},variant:\"contained\",color:\"primary\"},\"Add New\"))),/*#__PURE__*/React.createElement(Grid,{container:true,spacing:1,style:{marginBottom:'6%'}},/*#__PURE__*/React.createElement(Grid,{item:true,xs:12}),/*#__PURE__*/React.createElement(Grid,{item:true,xs:12},/*#__PURE__*/React.createElement(MaterialTable,{title:\"Saccos\",style:{zIndex:'0'},columns:columns,data:riders,icons:tableIcons,editable:{// onRowUpdate: (newData, oldData) =>\n//   new Promise((resolve) => {\n//     handleRowUpdate(newData, oldData, resolve);\n//   }),\n// onRowDelete: (oldData) =>\n//   new Promise((resolve) => {\n//     handleRowDelete(oldData, resolve)\n//   }),\n},options:{exportButton:true,selection:true,// filtering: true,\nsorting:true,actionsColumnIndex:-1,search:true,paginationType:'normal',pageSize:10,pageSizeOptions:[25,50,100,200,300,400,500,600,700]},actions:[{tooltip:'Remove All Selected Users',icon:DeleteOutline,onClick:function onClick(evt,data){return alert('You want to delete '+data.length+' rows');}}]})))))));};export default withRouter(SaccoTable);","map":{"version":3,"sources":["/Users/agwenchez/Desktop/Afya Kwanza/Super Admin Dashboard/client/src/components/new/SaccoTable.jsx"],"names":["React","Fragment","useState","useEffect","forwardRef","Container","Grid","Button","IconButton","MaterialTable","AddBox","ArrowDownward","Check","ChevronLeft","ChevronRight","Clear","DeleteOutline","Edit","FilterList","FirstPage","LastPage","Remove","ViewColumn","SaveAlt","Search","axios","useHistory","withRouter","Link","toast","Modal","Layout","EditIcon","DeleteIcon","Avatar","ConfirmDelete","tableIcons","Add","props","ref","Delete","DetailPanel","Export","Filter","NextPage","PreviousPage","ResetSearch","SortArrow","ThirdStateCheck","api","create","baseURL","validateEmail","email","re","test","String","toLowerCase","SaccoTable","data","setData","riders","setRiders","iserror","setIserror","errorMessages","setErrorMessages","history","columns","title","field","headerStyle","paddingRight","cellStyle","paddingLeft","render","rowData","pathname","state","sacco_name","id","sacco_id","color","handleDelete","delete","res","dataDelete","afterDelete","filter","sacco","dialog","document","getElementById","style","display","status","success","console","log","message","error","get","then","catch","width","paddingTop","marginBottom","textAlign","push","zIndex","exportButton","selection","sorting","actionsColumnIndex","search","paginationType","pageSize","pageSizeOptions","tooltip","icon","onClick","evt","alert","length"],"mappings":"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","sourcesContent":["import React, { Fragment, useState, useEffect, forwardRef } from 'react';\nimport { Container } from 'reactstrap'\nimport { Grid, Button, IconButton } from '@material-ui/core/'\nimport MaterialTable from \"material-table\";\nimport { AddBox, ArrowDownward, Check, ChevronLeft, ChevronRight, Clear, DeleteOutline, Edit, FilterList, FirstPage, LastPage, Remove, ViewColumn, SaveAlt, Search } from \"@material-ui/icons\";\nimport axios from 'axios';\nimport { useHistory, withRouter, Link } from \"react-router-dom\";\n// import Alert from '@material-ui/lab/Alert';\nimport { toast } from 'react-toastify';\nimport Modal from './modal';\nimport Layout from \"../AppWrapper\"\nimport EditIcon from '@material-ui/icons/Edit';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport Avatar from 'react-avatar';\nimport ConfirmDelete from './ConfirmDelete';\n// import { Delete } from 'react-feather';\n\n\nconst tableIcons = {\n  Add: forwardRef((props, ref) => <Button {...props} ref={ref} variant=\"contained\" color=\"primary\" >Add New</Button>),\n  // Add: () => <Button variant=\"contained\" color=\"primary\" >Add New</Button> ,\n  Check: forwardRef((props, ref) => <Check {...props} ref={ref} />),\n  Clear: forwardRef((props, ref) => <Clear {...props} ref={ref} />),\n  Delete: forwardRef((props, ref) => <DeleteOutline {...props} ref={ref} />),\n  DetailPanel: forwardRef((props, ref) => <ChevronRight {...props} ref={ref} />),\n  Edit: forwardRef((props, ref) => <Edit {...props} ref={ref} />),\n  Export: forwardRef((props, ref) => <SaveAlt {...props} ref={ref} />),\n  Filter: forwardRef((props, ref) => <FilterList {...props} ref={ref} />),\n  FirstPage: forwardRef((props, ref) => <FirstPage {...props} ref={ref} />),\n  LastPage: forwardRef((props, ref) => <LastPage {...props} ref={ref} />),\n  NextPage: forwardRef((props, ref) => <ChevronRight {...props} ref={ref} />),\n  PreviousPage: forwardRef((props, ref) => <ChevronLeft {...props} ref={ref} />),\n  ResetSearch: forwardRef((props, ref) => <Clear {...props} ref={ref} />),\n  Search: forwardRef((props, ref) => <Search {...props} ref={ref} />),\n  SortArrow: forwardRef((props, ref) => <ArrowDownward {...props} ref={ref} />),\n  ThirdStateCheck: forwardRef((props, ref) => <Remove {...props} ref={ref} />),\n  ViewColumn: forwardRef((props, ref) => <ViewColumn {...props} ref={ref} />)\n};\n\n\n\nconst api = axios.create({\n  baseURL: `https://afya-kwanza-backend.herokuapp.com`\n})\n\nfunction validateEmail(email) {\n  const re = /^((?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|\"(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21\\x23-\\x5b\\x5d-\\x7f]|\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])*\")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21-\\x5a\\x53-\\x7f]|\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])+)\\]))$/;\n  return re.test(String(email).toLowerCase());\n}\n\nconst SaccoTable = () => {\n  const [data, setData] = useState([]); //table data\n  const [riders, setRiders] = useState([])\n\n  //for error handling\n  const [iserror, setIserror] = useState(false)\n  const [errorMessages, setErrorMessages] = useState([])\n\n  const history = useHistory();\n\n  var columns = [\n    // { title: \"Avatar\", render: rowData => <Avatar maxInitials={1} size={40} round={true} name={rowData === undefined ? \" \" : rowData.sacco_name} /> },\n    { title: \"Sacco Name\", field: \"sacco_name\" },\n    { title: \"Admin FirstName\", field: \"admin_firstname\" },\n    { title: \"Admin LastName\", field: \"admin_lastname\" },\n    {\n      title: \"Admin email\",\n      field: \"admin_email\",\n      headerStyle: {\n        paddingRight: \"1%\"\n      }\n    },\n    { title: \"Phone No\", field: \"admin_phonenumber\" },\n    { title: \"Sacco Email\", field: \"sacco_email\" },\n    {\n      cellStyle: {\n        paddingLeft: \"6%\"\n      },\n      headerStyle: {\n        paddingLeft: \"6%\"\n      },\n      render: rowData => (\n        <Link\n          to={{\n            pathname: \"/dashboard/saccos/edit\",\n            state: {\n              sacco_name: rowData.sacco_name, id: rowData.sacco_id\n            }\n          }}\n        >\n          {/* <IconButton aria-label=\"delete\"> */}\n          <EditIcon style={{ color: 'black' }} />\n          {/* </IconButton> */}\n        </Link>\n      )\n    },\n    {\n      cellStyle: {\n        paddingRight: \"5%\"\n      },\n      headerStyle: {\n        paddingRight: \"5%\"\n      },\n      render: rowData => (<ConfirmDelete onDelete={()=> handleDelete(rowData.sacco_id)} name={rowData.sacco_name}/>)\n    },\n\n  ]\n\n\n  const handleDelete = async (id) => {\n    try {\n      const res = await api.delete(`/saccos/delete/${id}`)\n\n      const dataDelete = [...riders];\n      const afterDelete = dataDelete.filter(sacco => sacco.sacco_id !==id);\n      const dialog = document.getElementById('confirm_delete')\n      dialog.style.display = 'none'; \n      setRiders([...afterDelete]);\n      res.status == 200 && toast.success(res.data)\n\n    } catch (error) {\n      console.log(\"error occured=>\", error.message)\n      error.message == 'Request failed with status code 500' && toast.error('You cant delete a sacco that has members')\n    }\n\n  }\n\n\n  useEffect(() => {\n    api.get('/saccos/all')\n      .then(res => {\n        // console.log(\"data =>\", res.data)\n        setRiders(res.data)\n        // console.log(\"saccos =>\", riders)\n      }\n      ).catch(error => {\n        console.log(\"Error\", error)\n      })\n  }, [])\n\n  // const redirectToReport = (rowData) => {\n  //   // const { history } = props;\n  //   history.push({\n  //     pathname: \"/dashboard/saccos/profile\", // re-route to this path\n  //     state: { sacco_name: rowData.sacco_email, surname: rowData.admin_email } // your row data\n  //   });\n  // };\n\n  return (\n    <Layout>\n      <Fragment>\n        <Container fluid={true}>\n          <div style={{ width: '100%' }}>\n\n            <h3 style={{ paddingTop: '5%', marginBottom: '2.5%', textAlign: 'center' }}>Saccos Table</h3>\n            <Grid container spacing={10}>\n              <Grid item xs=\"2\"></Grid>\n              <Grid item xs=\"2\"></Grid>\n              <Grid item xs=\"2\"></Grid>\n              <Grid item xs=\"2\"></Grid>\n              <Grid item xs=\"2\"></Grid>\n              <Grid item xs=\"2\">\n                <Button onClick={() => { history.push('/dashboard/saccos/new') }} variant=\"contained\" color=\"primary\" >\n                  Add New\n                </Button>\n              </Grid>\n            </Grid>\n\n            {/* <Modal /> */}\n            <Grid container spacing={1} style={{ marginBottom: '6%' }}>\n              <Grid item xs={12}></Grid>\n              <Grid item xs={12}>\n                {/* <div>\n                {iserror &&\n                  <Alert severity=\"error\">\n                    {errorMessages.map((msg, i) => {\n                      return <div key={i}>{msg}</div>\n                    })}\n                  </Alert>\n                }\n              </div> */}\n                <MaterialTable\n                  title=\"Saccos\"\n                  style={{ zIndex: '0' }}\n                  columns={columns}\n                  data={riders}\n                  icons={tableIcons}\n                  editable={{\n                    // onRowUpdate: (newData, oldData) =>\n                    //   new Promise((resolve) => {\n                    //     handleRowUpdate(newData, oldData, resolve);\n\n                    //   }),\n                    // onRowDelete: (oldData) =>\n                    //   new Promise((resolve) => {\n                    //     handleRowDelete(oldData, resolve)\n                    //   }),\n                  }}\n                  options={{\n                    exportButton: true,\n                    selection: true,\n                    // filtering: true,\n                    sorting: true,\n                    actionsColumnIndex: -1,\n                    search: true,\n                    paginationType: 'normal',\n                    pageSize: 10,\n                    pageSizeOptions: [25, 50, 100, 200, 300, 400, 500, 600, 700]\n                  }}\n                  actions={[\n                    {\n                      tooltip: 'Remove All Selected Users',\n                      icon: DeleteOutline,\n                      onClick: (evt, data) => alert('You want to delete ' + data.length + ' rows')\n                    }\n                  ]}\n\n                />\n              </Grid>\n\n            </Grid>\n          </div>\n        </Container>\n      </Fragment>\n    </Layout>\n  );\n}\n\nexport default withRouter(SaccoTable);"]},"metadata":{},"sourceType":"module"}